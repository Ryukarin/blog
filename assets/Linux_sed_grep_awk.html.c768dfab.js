import{_ as e,o as p,b as t,F as l,a,d as n,f as s}from"./app.893f8b81.js";const o={},r=a(`<h2 id="grep-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#grep-\u547D\u4EE4" aria-hidden="true">#</a> grep \u547D\u4EE4</h2><p>\u5F88\u591A\u65F6\u5019\uFF0C\u6211\u4EEC\u5E76\u4E0D\u9700\u8981\u5217\u51FA\u6587\u4EF6\u7684\u5168\u90E8\u5185\u5BB9\uFF0C\u800C\u662F\u4ECE\u6587\u4EF6\u4E2D\u627E\u5230\u5305\u542B\u6307\u5B9A\u4FE1\u606F\u7684\u90A3\u4E9B\u884C\uFF0C\u8981\u5B9E\u73B0\u8FD9\u4E2A\u76EE\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>grep</code> \u547D\u4EE4\u3002</p><p><code>grep</code> \u547D\u4EE4\u4F5C\u4E3A Linux \u6587\u672C\u5904\u7406\u4E09\u5251\u5BA2\u7684\u4E00\u5458\uFF0C\u53E6\u5916\u4E24\u4E2A\u662F <code>sed</code> \u548C <code>awk</code>\u3002</p><p><code>grep</code> \u547D\u4EE4\u7684\u7531\u6765\u53EF\u4EE5\u8FFD\u6EAF\u5230 UNIX \u8BDE\u751F\u7684\u65E9\u671F\uFF0C\u5728 UNIX \u7CFB\u7EDF\u4E2D\uFF0C<u>\u641C\u7D22\u7684\u6A21\u5F0F\uFF08patterns\uFF09\u88AB\u79F0\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08regular expressions\uFF09</u>\uFF0C\u4E3A\u4E86\u8981\u5F7B\u5E95\u641C\u7D22\u4E00\u4E2A\u6587\u4EF6\uFF0C\u6709\u7684\u7528\u6237\u5728\u8981\u641C\u7D22\u7684\u5B57\u7B26\u4E32\u524D\u52A0\u4E0A\u524D\u7F00 global\uFF08\u5168\u9762\u7684\uFF09\uFF0C\u4E00\u65E6\u627E\u5230\u76F8\u5339\u914D\u7684\u5185\u5BB9\uFF0C\u7528\u6237\u5C31\u50CF\u5C06\u5176\u8F93\u51FA\uFF08print\uFF09\u5230\u5C4F\u5E55\u4E0A\uFF0C\u800C\u5C06\u8FD9\u4E00\u7CFB\u5217\u7684\u64CD\u4F5C\u6574\u5408\u5230\u4E00\u8D77\u5C31\u662F global regular expressions print\uFF0C\u800C\u8FD9\u4E5F\u5C31\u662F <code>grep</code> \u547D\u4EE4\u7684\u5168\u79F0\u3002</p><p><code>grep</code>\u547D\u4EE4\u80FD\u591F\u5728\u4E00\u4E2A\u6216\u591A\u4E2A\u6587\u4EF6\u4E2D\uFF0C\u641C\u7D22\u67D0\u4E00\u7279\u5B9A\u7684\u5B57\u7B26\u6A21\u5F0F\uFF08\u4E5F\u5C31\u662F\u6B63\u5219\u8868\u8FBE\u5F0F\uFF09\uFF0C\u6B64\u6A21\u5F0F\u53EF\u4EE5\u662F\u5355\u4E00\u7684\u5B57\u7B26\u3001\u5B57\u7B26\u4E32\u3001\u5355\u8BCD\u6216\u53E5\u5B50\u3002</p><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u63CF\u8FF0\u4E00\u7EC4\u5B57\u7B26\u4E32\u7684\u4E00\u4E2A\u6A21\u5F0F\uFF0C\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u6784\u6210\u6A21\u4EFF\u4E86\u6570\u5B66\u8868\u8FBE\u5F0F\uFF0C\u901A\u8FC7\u4F7F\u7528\u64CD\u4F5C\u7B26\u5C06\u8F83\u5C0F\u7684\u8868\u8FBE\u5F0F\u7EC4\u5408\u6210\u4E00\u4E2A\u65B0\u7684\u8868\u8FBE\u5F0F\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u4EE5\u662F\u4E00\u4E9B\u7EAF\u6587\u672C\u6587\u5B57\uFF0C\u4E5F\u53EF\u4EE5\u662F\u7528\u6765\u4EA7\u751F\u6A21\u5F0F\u7684\u4E00\u4E9B\u7279\u6B8A\u5B57\u7B26\u3002\u4E3A\u4E86\u8FDB\u4E00\u6B65\u5B9A\u4E49\u4E00\u4E2A\u641C\u7D22\u6A21\u5F0F\uFF0C<code>grep</code> \u547D\u4EE4\u652F\u6301\u5982\u88681 \u6240\u793A\u7684\u8FD9\u51E0\u79CD\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u5143\u5B57\u7B26\uFF08\u4E5F\u5C31\u662F\u901A\u914D\u7B26\uFF09\u3002</p><p><strong>\u88681 <u>\u6B63\u5219\u8868\u8FBE\u5F0F\u901A\u914D\u7B26</u></strong></p><table><thead><tr><th>\u901A\u914D\u7B26</th><th>\u529F\u80FD</th></tr></thead><tbody><tr><td>*</td><td>\u5339\u914D\u524D\u9762\u7684\u5B50\u8868\u8FBE\u5F0F 0 \u6B21\u6216\u591A\u6B21\u3002</td></tr><tr><td>?</td><td>\u5339\u914D\u524D\u9762\u7684\u5B50\u8868\u8FBE\u5F0F 0 \u6B21\u6216 1 \u6B21\u3002</td></tr><tr><td>+</td><td>\u5339\u914D\u524D\u9762\u7684\u5B50\u8868\u8FBE\u5F0F 1 \u6B21\u6216\u591A\u6B21\u3002</td></tr><tr><td>.</td><td>\u5C06\u5339\u914D\u4EFB\u4F55\u4E00\u4E2A\u5B57\u7B26\uFF0C\u4E14\u53EA\u80FD\u662F\u4E00\u4E2A\u5B57\u7B26\u3002</td></tr><tr><td>[a-z]</td><td>\u5339\u914D\u65B9\u62EC\u53F7\u4E2D\u7684\u4EFB\u610F\u4E00\u4E2A\u5B57\u7B26\u3002</td></tr><tr><td>[^xyz]</td><td>\u5339\u914D\u9664\u65B9\u62EC\u53F7\u4E2D\u5B57\u7B26\u5916\u7684\u6240\u6709\u5B57\u7B26\u3002</td></tr><tr><td>|</td><td>\u6307\u660E\u4E24\u9879\u4E4B\u95F4\u7684\u4E00\u4E2A\u9009\u62E9\u3002</td></tr><tr><td>{n}</td><td>n \u662F\u4E00\u4E2A\u975E\u8D1F\u6574\u6570\u3002\u5339\u914D\u786E\u5B9A\u7684 n \u6B21\u3002</td></tr><tr><td>{n,}</td><td>n \u662F\u4E00\u4E2A\u975E\u8D1F\u6574\u6570\u3002\u81F3\u5C11\u5339\u914D n \u6B21\u3002</td></tr><tr><td>{n,m}</td><td>m \u548C n \u5747\u4E3A\u975E\u8D1F\u6574\u6570\uFF0C\u5176\u4E2D n &lt;= m\u3002\u6700\u5C11\u5339\u914D n \u6B21\u4E14\u6700\u591A\u5339\u914D m \u6B21\u3002</td></tr><tr><td>^</td><td>\u9501\u5B9A\u884C\u7684\u5F00\u5934\u3002</td></tr><tr><td>$</td><td>\u9501\u5B9A\u884C\u7684\u7ED3\u5C3E\u3002</td></tr><tr><td>\\</td><td>\u8F6C\u4E49\u5B57\u7B26\u3002\u5C06\u4E0B\u4E00\u4E2A\u5B57\u7B26\u6807\u8BB0\u4E3A\u6216\u7279\u6B8A\u5B57\u7B26\u3001\u6216\u539F\u4E49\u5B57\u7B26\u3001\u6216\u5411\u540E\u5F15\u7528\u3001\u6216\u516B\u8FDB\u5236\u8F6C\u4E49\u7B26\u3002</td></tr></tbody></table><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u57FA\u672C\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u5982\u901A\u914D\u7B26 <strong>*\u3001+\u3001{\u3001|\u3001(</strong> \u548C <strong>)</strong> \u7B49\uFF0C\u5DF2\u7ECF\u5931\u53BB\u4E86\u5B83\u4EEC\u539F\u672C\u7684\u542B\u4E49\uFF0C\u800C\u82E5\u8981\u6062\u590D\u5B83\u4EEC\u539F\u672C\u7684\u542B\u4E49\uFF0C\u5219\u8981\u5728\u4E4B\u524D\u6DFB\u52A0\u53CD\u659C\u6760 <strong>\\</strong>\uFF0C\u5982 <strong>\\*\u3001\\+\u3001\\{\u3001\\|\u3001\\(</strong> \u548C <strong>\\)</strong>\u3002</p><p><code>grep</code> \u547D\u4EE4\u662F\u7528\u6765\u5728\u6BCF\u4E00\u4E2A\u6587\u4EF6\u4E2D\uFF08\u6216\u7279\u5B9A\u8F93\u51FA\u4E0A\uFF09\u641C\u7D22\u7279\u5B9A\u7684\u6A21\u5F0F\uFF0C\u5F53\u4F7F\u7528 <code>grep</code> \u65F6\uFF0C\u5305\u542B\u6307\u5B9A\u5B57\u7B26\u6A21\u5F0F\u7684\u6BCF\u4E00\u884C\u5185\u5BB9\uFF0C\u90FD\u4F1A\u88AB\u6253\u5370\uFF08\u663E\u793A\uFF09\u5230\u5C4F\u5E55\u4E0A\uFF0C\u4F46\u662F\u4F7F\u7528 <code>grep</code> \u547D\u4EE4\u5E76\u4E0D\u6539\u53D8\u6587\u4EF6\u4E2D\u7684\u5185\u5BB9\u3002</p><h3 id="\u57FA\u672C\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u7528\u6CD5" aria-hidden="true">#</a> \u57FA\u672C\u7528\u6CD5</h3><p><code>grep</code> \u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep [\u9009\u9879] \u6A21\u5F0F \u6587\u4EF6\u540D</span>
\u9009\u9879\uFF1A
	-c\uFF1A\u4EC5\u5217\u51FA\u6587\u4EF6\u4E2D\u5305\u542B\u6A21\u5F0F\u7684\u884C\u6570
	-i\uFF1A\u5FFD\u7565\u6A21\u5F0F\u4E2D\u7684\u5B57\u6BCD\u5927\u5C0F\u5199
	-l\uFF1A\u5217\u51FA\u5E26\u6709\u5339\u914D\u884C\u7684\u6587\u4EF6\u540D
	-n\uFF1A\u5728\u6BCF\u4E00\u884C\u7684\u6700\u524D\u9762\u5217\u51FA\u884C\u53F7
	-v\uFF1A\u5217\u51FA\u6CA1\u6709\u5339\u914D\u6A21\u5F0F\u7684\u884C
	-w\uFF1A\u628A\u8868\u8FBE\u5F0F\u5F53\u505A\u4E00\u4E2A\u5B8C\u6574\u7684\u5355\u5B57\u7B26\u6765\u641C\u5BFB\uFF0C\u5FFD\u7565\u90A3\u4E9B\u90E8\u5206\u5339\u914D\u7684\u884C

\u6A21\u5F0F	\uFF1A\u8981\u4E48\u662F\u5B57\u7B26\uFF08\u4E32\uFF09\uFF0C\u8981\u4E48\u662F\u6B63\u5219\u8868\u8FBE\u5F0F\u3002

\u6587\u4EF6\u540D	\uFF1A\u5373\u8981\u641C\u7D22\u5339\u914D\u7684\u6E90\u6587\u4EF6\u6216\u8005\u6807\u51C6\u8F93\u5165\uFF0C\u6807\u51C6\u8F93\u5165\u5E38\u7528\u7BA1\u9053\u7B26 <span class="token operator">|</span> \u8FDE\u63A5 <span class="token function">grep</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">\u6CE8\u610F</p><p>\u5982\u679C\u662F\u641C\u7D22\u591A\u4E2A\u6587\u4EF6\uFF0C<code>grep</code> \u547D\u4EE4\u7684\u641C\u7D22\u7ED3\u679C\u53EA\u663E\u793A\u6587\u4EF6\u4E2D\u53D1\u73B0\u5339\u914D\u6A21\u5F0F\u7684\u6587\u4EF6\u540D\uFF1B\u800C\u5982\u679C\u641C\u7D22\u5355\u4E2A\u6587\u4EF6\uFF0C<code>grep</code> \u547D\u4EE4\u7684\u7ED3\u679C\u5C06\u663E\u793A\u6BCF\u4E00\u4E2A\u5305\u542B\u5339\u914D\u6A21\u5F0F\u7684\u884C\u3002</p></div><p>\u4F8B 1\uFF1A\u5047\u8BBE\u6709\u4E00\u4EFD <code>emp.data</code> \u5458\u5DE5\u6E05\u5355\uFF0C\u73B0\u5728\u8981\u641C\u7D22\u6B64\u6587\u4EF6\uFF0C\u627E\u51FA\u804C\u4F4D\u4E3A CLERK \u7684\u6240\u6709\u5458\u5DE5\uFF0C\u5219\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6765\u81EA\u6587\u4EF6</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep CLERK emp.data</span>

<span class="token comment"># \u6765\u81EA\u6807\u51C6\u8F93\u5165</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat emp.data | grep CLERK</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u800C\u5728\u6B64\u57FA\u7840\u4E0A\uFF0C\u5982\u679C\u53EA\u60F3\u77E5\u9053\u804C\u4F4D\u4E3A CLERK \u7684\u5458\u5DE5\u7684\u4EBA\u6570\uFF0C\u53EF\u4EE5\u4F7F\u7528\u201C-c\u201D\u9009\u9879\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep -c CLERK emp.data</span>
<span class="token comment">#\u5FFD\u7565\u8F93\u51FA\u5185\u5BB9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4F8B 2\uFF1A\u641C\u7D22 <code>emp.data</code> \u6587\u4EF6\uFF0C\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u627E\u51FA\u4EE5 78 \u5F00\u5934\u7684\u6570\u636E\u884C\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep ^78 emp.data</span>
<span class="token comment">#\u5FFD\u7565\u8F93\u51FA\u5185\u5BB9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>grep</code> \u547D\u4EE4\u7684\u529F\u80FD\u975E\u5E38\u5F3A\u5927\uFF0C\u901A\u8FC7\u5229\u7528\u5B83\u7684\u4E0D\u540C\u9009\u9879\u4EE5\u53CA\u53D8\u5316\u4E07\u5343\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u53EF\u4EE5\u83B7\u53D6\u4EFB\u4F55\u6211\u4EEC\u6240\u9700\u8981\u7684\u4FE1\u606F\u3002\u672C\u8282\u6240\u4ECB\u7ECD\u7684 grep \u547D\u4EE4\uFF0C\u53EA\u4ECB\u7ECD\u4E86\u5B83\u7684\u4E00\u90E8\u5206\u57FA\u7840\u77E5\u8BC6\uFF0C\u6BD4\u5982\u8BF4\uFF0Cgrep \u547D\u4EE4\u53EF\u7528\u7684\u9009\u9879\u8FD8\u6709\u5F88\u591A\uFF0C\u4E14\u7528\u6CD5\u4E5F\u4E94\u82B1\u516B\u95E8\uFF0C\u4E0D\u8FC7\u5BF9\u4E8E\u521D\u5B66\u8005\u6765\u8BF4\uFF0C\u672C\u8282\u6240\u4ECB\u7ECD\u7684\u5185\u5BB9\u5DF2\u7ECF\u8DB3\u4EE5\u5E94\u4ED8\u591A\u6570 Linux \u7CFB\u7EDF\u7684\u65E5\u5E38\u5DE5\u4F5C\u4E86\u3002</p><p>\u4F8B 3\uFF1A\u5C06 <code>/etc/passwd</code> \u6587\u4EF6\u4E2D\uFF0C\u6CA1\u6709\u51FA\u73B0 root \u548C nologin \u7684\u884C\u6253\u5370\u51FA\u6765\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/passwd | grep -v root | grep -v nologin</span>
<span class="token comment">#\u5FFD\u7565\u8F93\u51FA\u5185\u5BB9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="egrep-\u6216-grep-e" tabindex="-1"><a class="header-anchor" href="#egrep-\u6216-grep-e" aria-hidden="true">#</a> egrep \u6216 grep -E</h3><p>\u4F7F\u7528 <code>egrep</code> \u7684\u4E3B\u8981\u597D\u5904\u662F\u589E\u52A0\u4E86\u989D\u5916\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u5143\u5B57\u7B26\u96C6\u3002</p><p>\u6253\u5370\u6240\u6709\u5305\u542B NW \u6216 EA \u7684\u884C\u3002\u5982\u679C\u4E0D\u662F\u4F7F\u7528 <code>egrep</code>\uFF0C\u800C\u662F <code>grep</code>\uFF0C\u5C06\u4E0D\u4F1A\u6709\u7ED3\u679C\u67E5\u51FA\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># egrep &#39;NW|EA&#39; testfile     </span>
northwest       NW      Charles Main        <span class="token number">3.0</span>     .98     <span class="token number">3</span>       <span class="token number">34</span>
eastern         EA      TB Savage           <span class="token number">4.4</span>     .84     <span class="token number">5</span>       <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5BF9\u4E8E\u6807\u51C6 <code>grep</code>\uFF0C\u5982\u679C\u5728\u6269\u5C55\u5143\u5B57\u7B26\u524D\u9762\u52A0 \\\uFF0Cgrep \u4F1A\u81EA\u52A8\u542F\u7528\u6269\u5C55\u9009\u9879 -E\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep &#39;NW\\|EA&#39; testfile</span>
northwest       NW      Charles Main        <span class="token number">3.0</span>     .98     <span class="token number">3</span>       <span class="token number">34</span>
eastern         EA      TB Savage           <span class="token number">4.4</span>     .84     <span class="token number">5</span>       <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u641C\u7D22\u6240\u6709\u5305\u542B\u4E00\u4E2A\u6216\u591A\u4E2A 3 \u7684\u884C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># egrep &#39;3+&#39; testfile</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep -E &#39;3+&#39; testfile</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep &#39;3\\+&#39; testfile        </span>
<span class="token comment">#\u8FD93\u6761\u547D\u4EE4\u5C06\u4F1A</span>
northwest       NW      Charles Main          <span class="token number">3.0</span>     .98     <span class="token number">3</span>       <span class="token number">34</span>
western         WE      Sharon Gray           <span class="token number">5.3</span>     .97     <span class="token number">5</span>       <span class="token number">23</span>
northeast       NE      AM Main Jr.           <span class="token number">5.1</span>     .94     <span class="token number">3</span>       <span class="token number">13</span>
central         CT      Ann Stephens          <span class="token number">5.7</span>     .94     <span class="token number">5</span>       <span class="token number">13</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u641C\u7D22\u6240\u6709\u5305\u542B 0 \u4E2A\u6216 1 \u4E2A\u5C0F\u6570\u70B9\u5B57\u7B26\u7684\u884C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># egrep &#39;2\\.?[0-9]&#39; testfile </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep -E &#39;2\\.?[0-9]&#39; testfile</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep &#39;2\\.\\?[0-9]&#39; testfile </span>
<span class="token comment">#\u9996\u5148\u542B\u67092\u5B57\u7B26\uFF0C\u5176\u540E\u7D27\u8DDF\u77400\u4E2A\u62161\u4E2A\u70B9\uFF0C\u540E\u9762\u518D\u662F0\u548C9\u4E4B\u95F4\u7684\u6570\u5B57\u3002</span>
western         WE      Sharon Gray           <span class="token number">5.3</span>     .97     <span class="token number">5</span>       <span class="token number">23</span>
southwest       SW      Lewis Dalsass         <span class="token number">2.7</span>     .8      <span class="token number">2</span>       <span class="token number">18</span>
eastern         EA      TB Savage             <span class="token number">4.4</span>     .84     <span class="token number">5</span>       <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u641C\u7D22\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u8FDE\u7EED\u7684 no \u7684\u884C\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># egrep &#39;(no)+&#39; testfile</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep -E &#39;(no)+&#39; testfile</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep &#39;\\(no\\)\\+&#39; testfile</span>
<span class="token comment">#3\u4E2A\u547D\u4EE4\u8FD4\u56DE\u76F8\u540C\u7ED3\u679C\uFF0C</span>
northwest       NW      Charles Main        <span class="token number">3.0</span>     .98     <span class="token number">3</span>       <span class="token number">34</span>
northeast       NE       AM Main Jr.        <span class="token number">5.1</span>     .94     <span class="token number">3</span>       <span class="token number">13</span>
north           NO      Margot Weber        <span class="token number">4.5</span>     .89     <span class="token number">5</span>       <span class="token number">9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="fgrep-\u6216-grep-f" tabindex="-1"><a class="header-anchor" href="#fgrep-\u6216-grep-f" aria-hidden="true">#</a> fgrep \u6216 grep -F</h3><p><code>fgrep</code> \u67E5\u8BE2\u901F\u5EA6\u6BD4 <code>grep</code> \u547D\u4EE4\u5FEB\uFF0C\u4F46\u662F\u4E0D\u591F\u7075\u6D3B\uFF1B\u5B83\u53EA\u80FD\u627E\u56FA\u5B9A\u7684\u6587\u672C\uFF0C\u800C\u4E0D\u662F\u89C4\u5219\u8868\u8FBE\u5F0F\u3002</p><p>\u5982\u679C\u4F60\u60F3\u5728\u4E00\u4E2A\u6587\u4EF6\u6216\u8005\u8F93\u51FA\u4E2D\u627E\u5230\u5305\u542B\u661F\u53F7\u5B57\u7B26\u7684\u884C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># fgrep &#39;*&#39; /etc/profile</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> /etc/profile.d/*.sh <span class="token punctuation">;</span> <span class="token keyword">do</span>

\u6216
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep -F &#39;*&#39; /etc/profile</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> /etc/profile.d/*.sh <span class="token punctuation">;</span> <span class="token keyword">do</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="sed-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-\u547D\u4EE4" aria-hidden="true">#</a> sed \u547D\u4EE4</h2><p>\u6211\u4EEC\u77E5\u9053\uFF0CVim \u91C7\u7528\u7684\u662F\u4EA4\u4E92\u5F0F\u6587\u672C\u7F16\u8F91\u6A21\u5F0F\uFF0C\u4F60\u53EF\u4EE5\u7528\u952E\u76D8\u547D\u4EE4\u6765\u4EA4\u4E92\u6027\u5730\u63D2\u5165\u3001\u5220\u9664\u6216\u66FF\u6362\u6570\u636E\u4E2D\u7684\u6587\u672C\u3002</p><p><code>sed</code> \u547D\u4EE4\uFF0C\u5B83\u91C7\u7528\u7684\u662F\u6D41\u7F16\u8F91\u6A21\u5F0F\uFF0C\u6700\u660E\u663E\u7684\u7279\u70B9\u662F\uFF0C\u5728 <code>sed</code> \u5904\u7406\u6570\u636E\u4E4B\u524D\uFF0C\u9700\u8981\u9884\u5148\u63D0\u4F9B\u4E00\u7EC4\u89C4\u5219\uFF0C<code>sed</code> \u4F1A\u6309\u7167\u6B64\u89C4\u5219\u6765\u7F16\u8F91\u6570\u636E\u3002</p><p><code>sed</code> \u4F1A\u6839\u636E\u811A\u672C\u547D\u4EE4\u6765\u5904\u7406\u6587\u672C\u6587\u4EF6\u4E2D\u7684\u6570\u636E\uFF0C\u8FD9\u4E9B\u547D\u4EE4\u8981\u4E48\u4ECE\u547D\u4EE4\u884C\u4E2D\u8F93\u5165\uFF0C\u8981\u4E48\u5B58\u50A8\u5728\u4E00\u4E2A\u6587\u672C\u6587\u4EF6\u4E2D\uFF0C\u6B64\u547D\u4EE4\u6267\u884C\u6570\u636E\u7684\u987A\u5E8F\u5982\u4E0B\uFF1A</p><ol><li>\u6BCF\u6B21\u4EC5\u8BFB\u53D6\u4E00\u884C\u5185\u5BB9\uFF1B</li><li>\u6839\u636E\u63D0\u4F9B\u7684\u89C4\u5219\u547D\u4EE4\u5339\u914D\u5E76\u4FEE\u6539\u6570\u636E\u3002\u6CE8\u610F\uFF0C<code>sed</code> \u9ED8\u8BA4\u4E0D\u4F1A\u76F4\u63A5\u4FEE\u6539\u6E90\u6587\u4EF6\u6570\u636E\uFF0C\u800C\u662F\u4F1A\u5C06\u6570\u636E\u590D\u5236\u5230\u7F13\u51B2\u533A\u4E2D\uFF0C\u4FEE\u6539\u4E5F\u4EC5\u9650\u4E8E\u7F13\u51B2\u533A\u4E2D\u7684\u6570\u636E\uFF1B</li><li>\u5C06\u6267\u884C\u7ED3\u679C\u8F93\u51FA\u3002</li></ol><p>\u5F53\u4E00\u884C\u6570\u636E\u5339\u914D\u5B8C\u6210\u540E\uFF0C\u5B83\u4F1A\u7EE7\u7EED\u8BFB\u53D6\u4E0B\u4E00\u884C\u6570\u636E\uFF0C\u5E76\u91CD\u590D\u8FD9\u4E2A\u8FC7\u7A0B\uFF0C\u76F4\u5230\u5C06\u6587\u4EF6\u4E2D\u6240\u6709\u6570\u636E\u5904\u7406\u5B8C\u6BD5\u3002</p><p><code>sed</code> \u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed [\u9009\u9879] &#39;[\u811A\u672C\u547D\u4EE4]&#39; \u6587\u4EF6\u540D</span>
\u9009\u9879\uFF1A
	-e \u811A\u672C\u547D\u4EE4		\uFF1A\u8BE5\u9009\u9879\u4F1A\u5C06\u5176\u540E\u8DDF\u7684\u811A\u672C\u547D\u4EE4\u6DFB\u52A0\u5230\u5DF2\u6709\u7684\u547D\u4EE4\u4E2D
	-f \u811A\u672C\u547D\u4EE4\u6587\u4EF6	\uFF1A\u8BE5\u9009\u9879\u4F1A\u5C06\u5176\u540E\u6587\u4EF6\u4E2D\u7684\u811A\u672C\u547D\u4EE4\u6DFB\u52A0\u5230\u5DF2\u6709\u7684\u547D\u4EE4\u4E2D
	-n				\uFF1A\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Csed \u4F1A\u5728\u6240\u6709\u7684\u811A\u672C\u6307\u5B9A\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u4F1A\u81EA\u52A8\u8F93\u51FA\u5904\u7406\u540E\u7684\u5185\u5BB9\uFF0C\u800C\u8BE5\u9009\u9879\u4F1A\u5C4F\u853D\u542F\u52A8\u8F93\u51FA\uFF0C\u9700\u4F7F\u7528 print \u547D\u4EE4\u6765\u5B8C\u6210\u8F93\u51FA
	-i				\uFF1A\u6B64\u9009\u9879\u4F1A\u76F4\u63A5\u4FEE\u6539\u6E90\u6587\u4EF6\uFF0C\u8981\u614E\u7528
	
\u811A\u672C\u547D\u4EE4\uFF1A
	s	\uFF1A\u67E5\u627E\u66FF\u6362
	d	\uFF1A\u5220\u9664\u5B9A\u4F4D\u884C
	a<span class="token punctuation">\\</span>	\uFF1A\u5728\u5F53\u524D\u884C\u4E0B\u9762\u63D2\u5165\u6587\u672C
	i<span class="token punctuation">\\</span>	\uFF1A\u5728\u5F53\u524D\u884C\u4E0A\u9762\u63D2\u5165\u6587\u672C
	c<span class="token punctuation">\\</span>	\uFF1A\u7528\u65B0\u6587\u672C\u66FF\u6362\u5B9A\u4F4D\u6587\u672C
	y	\uFF1A\u8F6C\u6362\uFF08\u8868\u793A\u628A\u4E00\u4E2A\u5B57\u7B26\u7FFB\u8BD1\u4E3A\u53E6\u5916\u7684\u5B57\u7B26\uFF09
	p	\uFF1A\u6253\u5370\uFF08\u548C-n\u9009\u9879\u4E00\u8D77\u5408\u7528\uFF0C\u6253\u5370\u5339\u914D\u884C\uFF09
	w	\uFF1A\u628A\u6587\u672C\u5199\u5230\u4E00\u4E2A\u6587\u4EF6\uFF0C\u7C7B\u4F3C\u8F93\u51FA\u91CD\u5B9A\u5411 <span class="token operator">&gt;</span>
	r	\uFF1A\u4ECE\u53E6\u4E00\u4E2A\u6587\u4EF6\u4E2D\u8BFB\u6587\u672C\uFF0C\u7C7B\u4F3C\u8F93\u5165\u91CD\u5B9A\u5411 <span class="token operator">&lt;</span>
	q	\uFF1A\u7B2C\u4E00\u4E2A\u6A21\u5F0F\u5339\u914D\u5B8C\u6210\u540E\u9000\u51FA\u6216\u7ACB\u5373\u9000\u51FA
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>\u6210\u529F\u4F7F\u7528 <code>sed</code> \u547D\u4EE4\u7684\u5173\u952E\u5728\u4E8E\u638C\u63E1\u5404\u5F0F\u5404\u6837\u7684\u811A\u672C\u547D\u4EE4\u53CA\u683C\u5F0F\uFF0C\u5B83\u80FD\u5E2E\u4F60\u5B9A\u5236\u7F16\u8F91\u6587\u4EF6\u7684\u89C4\u5219\u3002</p><h3 id="sed-\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed \u811A\u672C\u547D\u4EE4</h3><h4 id="sed-s-\u66FF\u6362\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-s-\u66FF\u6362\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed s \u66FF\u6362\u811A\u672C\u547D\u4EE4</h4><p>\u6B64\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>s/pattern/replacement/flags

address\uFF1A\u8868\u793A\u6307\u5B9A\u8981\u64CD\u4F5C\u7684\u5177\u4F53\u884C
pattern\uFF1A\u6307\u7684\u662F\u9700\u8981\u66FF\u6362\u7684\u5185\u5BB9
replacement\uFF1A\u6307\u7684\u662F\u8981\u66FF\u6362\u7684\u65B0\u5185\u5BB9
flags\uFF1A
	n		\uFF1A1~512 \u4E4B\u95F4\u7684\u6570\u5B57\uFF0C\u8868\u793A\u6307\u5B9A\u8981\u66FF\u6362\u7684\u5B57\u7B26\u4E32\u51FA\u73B0\u7B2C\u51E0\u6B21\u65F6\u624D\u8FDB\u884C\u66FF\u6362\uFF0C\u4F8B\u5982\uFF0C\u4E00\u884C\u4E2D\u6709 <span class="token number">3</span> \u4E2A A\uFF0C\u4F46\u7528\u6237\u53EA\u60F3\u66FF\u6362\u7B2C\u4E8C\u4E2A A\uFF0C\u8FD9\u662F\u5C31\u7528\u5230\u8FD9\u4E2A\u6807\u8BB0
	g		\uFF1A\u5BF9\u6570\u636E\u4E2D\u6240\u6709\u5339\u914D\u5230\u7684\u5185\u5BB9\u8FDB\u884C\u66FF\u6362\uFF0C\u5982\u679C\u6CA1\u6709 g\uFF0C\u5219\u53EA\u4F1A\u5728\u7B2C\u4E00\u6B21\u5339\u914D\u6210\u529F\u65F6\u505A\u66FF\u6362\u64CD\u4F5C\u3002\u4F8B\u5982\uFF0C\u4E00\u884C\u6570\u636E\u4E2D\u6709 <span class="token number">3</span> \u4E2A A\uFF0C\u5219\u53EA\u4F1A\u66FF\u6362\u7B2C\u4E00\u4E2A A
	p		\uFF1A\u4F1A\u6253\u5370\u4E0E\u66FF\u6362\u547D\u4EE4\u4E2D\u6307\u5B9A\u7684\u6A21\u5F0F\u5339\u914D\u7684\u884C\u3002\u6B64\u6807\u8BB0\u901A\u5E38\u4E0E -n \u9009\u9879\u4E00\u8D77\u4F7F\u7528
	w <span class="token function">file</span>	\uFF1A\u5C06\u7F13\u51B2\u533A\u4E2D\u7684\u5185\u5BB9\u5199\u5230\u6307\u5B9A\u7684 <span class="token function">file</span> \u6587\u4EF6\u4E2D\uFF08\u76F8\u5F53\u4E8E\u53E6\u5B58\u4E3A\uFF09
	<span class="token operator">&amp;</span>		\uFF1A\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D\u7684\u5185\u5BB9\u8FDB\u884C\u66FF\u6362
	<span class="token punctuation">\\</span>n		\uFF1A\u5339\u914D\u7B2C n \u4E2A\u5B50\u4E32\uFF0C\u8BE5\u5B50\u4E32\u4E4B\u524D\u5728 pattern \u4E2D\u7528 <span class="token punctuation">\\</span><span class="token punctuation">(</span><span class="token punctuation">\\</span><span class="token punctuation">)</span> \u6307\u5B9A
	<span class="token punctuation">\\</span>		\uFF1A\u8F6C\u4E49\uFF08\u8F6C\u4E49\u66FF\u6362\u90E8\u5206\u5305\u542B\uFF1A<span class="token operator">&amp;</span>\u3001<span class="token punctuation">\\</span> \u7B49\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u6BD4\u5982\uFF0C\u53EF\u4EE5\u6307\u5B9A <code>sed</code> \u7528\u65B0\u6587\u672C\u66FF\u6362\u7B2C\u51E0\u5904\u6A21\u5F0F\u5339\u914D\u7684\u5730\u65B9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data1.txt</span>
This is a <span class="token builtin class-name">test</span> of the <span class="token builtin class-name">test</span> script.
This is the second <span class="token builtin class-name">test</span> of the <span class="token builtin class-name">test</span> script.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/2&#39; data1.txt</span>
This is a <span class="token builtin class-name">test</span> of the trial script.
This is the second <span class="token builtin class-name">test</span> of the trial script.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u4F7F\u7528\u6570\u5B57 2 \u4F5C\u4E3A\u6807\u8BB0\u7684\u7ED3\u679C\u5C31\u662F\uFF0C<code>sed</code> \u7F16\u8F91\u5668\u53EA\u66FF\u6362\u6BCF\u884C\u4E2D\u7B2C 2 \u6B21\u51FA\u73B0\u7684\u5339\u914D\u6A21\u5F0F\u3002</p><p>\u5982\u679C\u8981\u7528\u65B0\u6587\u4EF6\u66FF\u6362\u6240\u6709\u5339\u914D\u7684\u5B57\u7B26\u4E32\uFF0C\u53EF\u4EE5\u4F7F\u7528 g \u6807\u8BB0\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/g&#39; data1.txt</span>
This is a trial of the trial script.
This is the second trial of the trial script.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6211\u4EEC\u77E5\u9053\uFF0C-n \u9009\u9879\u4F1A\u7981\u6B62 <code>sed</code> \u8F93\u51FA\uFF0C\u4F46 p \u6807\u8BB0\u4F1A\u8F93\u51FA\u4FEE\u6539\u8FC7\u7684\u884C\uFF0C\u5C06\u4E8C\u8005\u5339\u914D\u4F7F\u7528\u7684\u6548\u679C\u5C31\u662F\u53EA\u8F93\u51FA\u88AB\u66FF\u6362\u547D\u4EE4\u4FEE\u6539\u8FC7\u7684\u884C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data2.txt</span>
This is a <span class="token builtin class-name">test</span> line.
This is a different line.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;s/test/trial/p&#39; data2.txt</span>
This is a trial line.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>w \u6807\u8BB0\u4F1A\u5C06\u5339\u914D\u540E\u7684\u7ED3\u679C\u4FDD\u5B58\u5230\u6307\u5B9A\u6587\u4EF6\u4E2D\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/w test.txt&#39; data2.txt</span>
This is a trial line.
This is a different line.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#cat test.txt</span>
This is a trial line.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u5728\u4F7F\u7528 s \u811A\u672C\u547D\u4EE4\u65F6\uFF0C\u66FF\u6362\u7C7B\u4F3C\u6587\u4EF6\u8DEF\u5F84\u7684\u5B57\u7B26\u4E32\u4F1A\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u9700\u8981\u5C06\u8DEF\u5F84\u4E2D\u7684\u6B63\u659C\u7EBF\u8FDB\u884C\u8F6C\u4E49\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/\\/bin\\/bash/\\/bin\\/csh/&#39; /etc/passwd</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="sed-d-\u66FF\u6362\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-d-\u66FF\u6362\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed d \u66FF\u6362\u811A\u672C\u547D\u4EE4</h4><p>\u6B64\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>d
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u9700\u8981\u5220\u9664\u6587\u672C\u4E2D\u7684\u7279\u5B9A\u884C\uFF0C\u53EF\u4EE5\u7528 d \u811A\u672C\u547D\u4EE4\uFF0C\u5B83\u4F1A\u5220\u9664\u6307\u5B9A\u884C\u4E2D\u7684\u6240\u6709\u5185\u5BB9\u3002\u4F46\u4F7F\u7528\u8BE5\u547D\u4EE4\u65F6\u8981\u7279\u522B\u5C0F\u5FC3\uFF0C\u5982\u679C\u4F60\u5FD8\u8BB0\u6307\u5B9A\u5177\u4F53\u884C\u7684\u8BDD\uFF0C\u6587\u4EF6\u4E2D\u7684\u6240\u6709\u5185\u5BB9\u90FD\u4F1A\u88AB\u5220\u9664\uFF0C\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data3.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy dog
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;d&#39; data3.txt</span>
<span class="token comment">#\u4EC0\u4E48\u4E5F\u4E0D\u8F93\u51FA\uFF0C\u8BC1\u660E\u6210\u4E86\u7A7A\u6587\u4EF6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5F53\u548C\u6307\u5B9A\u5730\u5740\u4E00\u8D77\u4F7F\u7528\u65F6\uFF0C\u5220\u9664\u547D\u4EE4\u663E\u7136\u80FD\u53D1\u6325\u51FA\u5927\u7684\u529F\u7528\u3002\u53EF\u4EE5\u4ECE\u6570\u636E\u6D41\u4E2D\u5220\u9664\u7279\u5B9A\u7684\u6587\u672C\u884C\u3002</p><p>address \u7684\u5177\u4F53\u5199\u6CD5\u540E\u7EED\u4F1A\u505A\u8BE6\u7EC6\u4ECB\u7ECD\uFF0C\u8FD9\u91CC\u53EA\u7ED9\u5927\u5BB6\u4E3E\u51E0\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF1A</p><ul><li><p>\u901A\u8FC7\u884C\u53F7\u6307\u5B9A\uFF0C\u6BD4\u5982\u5220\u9664 data6.txt \u6587\u4EF6\u5185\u5BB9\u4E2D\u7684\u7B2C 3 \u884C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data4.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3d&#39; data4.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>\u6216\u8005\u901A\u8FC7\u7279\u5B9A\u884C\u533A\u95F4\u6307\u5B9A\uFF0C\u6BD4\u5982\u5220\u9664 data6.txt \u6587\u4EF6\u5185\u5BB9\u4E2D\u7684\u7B2C 2\u30013\u884C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;2,3d&#39; data4.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4E24\u4E2A\u6587\u672C\u6A21\u5F0F\u6765\u5220\u9664\u67D0\u4E2A\u533A\u95F4\u5185\u7684\u884C\uFF0C\u4F46\u8FD9\u4E48\u505A\u65F6\u8981\u5C0F\u5FC3\uFF0C\u4F60\u6307\u5B9A\u7684\u7B2C\u4E00\u4E2A\u6A21\u5F0F\u4F1A\u201C\u6253\u5F00\u201D\u884C\u5220\u9664\u529F\u80FD\uFF0C\u7B2C\u4E8C\u4E2A\u6A21\u5F0F\u4F1A\u201C\u5173\u95ED\u201D\u884C\u5220\u9664\u529F\u80FD\uFF0C\u56E0\u6B64\uFF0C<code>sed</code> \u4F1A\u5220\u9664\u4E24\u4E2A\u6307\u5B9A\u884C\u4E4B\u95F4\u7684\u6240\u6709\u884C\uFF08\u5305\u62EC\u6307\u5B9A\u7684\u884C\uFF09\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#sed &#39;/1/,/3/d&#39; data4.txt</span>
<span class="token comment">#\u5220\u9664\u7B2C 1~3 \u884C\u7684\u6587\u672C\u6570\u636E</span>
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>\u6216\u8005\u901A\u8FC7\u7279\u6B8A\u7684\u6587\u4EF6\u7ED3\u5C3E\u5B57\u7B26\uFF0C\u6BD4\u5982\u5220\u9664 data4.txt \u6587\u4EF6\u5185\u5BB9\u4E2D\u7B2C 3 \u884C\u5F00\u59CB\u7684\u6240\u6709\u7684\u5185\u5BB9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3,$d&#39; data4.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><p>\u5728\u6B64\u5F3A\u8C03\uFF0C\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B <code>sed</code> \u5E76\u4E0D\u4F1A\u4FEE\u6539\u539F\u59CB\u6587\u4EF6\uFF0C\u8FD9\u91CC\u88AB\u5220\u9664\u7684\u884C\u53EA\u662F\u4ECE <code>sed</code> \u7684\u8F93\u51FA\u4E2D\u6D88\u5931\u4E86\uFF0C\u539F\u59CB\u6587\u4EF6\u6CA1\u505A\u4EFB\u4F55\u6539\u53D8\u3002</p><h4 id="sed-a-\u548C-i-\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-a-\u548C-i-\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed a\\ \u548C i\\ \u811A\u672C\u547D\u4EE4</h4><p>a\\ \u547D\u4EE4\u8868\u793A\u5728\u6307\u5B9A\u884C\u7684\u540E\u9762\u9644\u52A0\u4E00\u884C\uFF0Ci\\ \u547D\u4EE4\u8868\u793A\u5728\u6307\u5B9A\u884C\u7684\u524D\u9762\u63D2\u5165\u4E00\u884C\uFF0C\u8FD9\u91CC\u4E4B\u6240\u4EE5\u8981\u540C\u65F6\u4ECB\u7ECD\u8FD9 2 \u4E2A\u811A\u672C\u547D\u4EE4\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u7684\u57FA\u672C\u683C\u5F0F\u5B8C\u5168\u76F8\u540C\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>a\uFF08\u6216i\uFF09<span class="token punctuation">\\</span>\u65B0\u6587\u672C\u5185\u5BB9
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E0B\u9762\u5206\u522B\u5C31\u8FD9 2 \u4E2A\u547D\u4EE4\uFF0C\u4E3E\u51E0\u4E2A\u4F8B\u5B50\u3002\u6BD4\u5982\u8BF4\uFF0C\u5C06\u4E00\u4E2A\u65B0\u884C\u63D2\u5165\u5230\u6570\u636E\u6D41\u7B2C\u4E09\u884C\u524D\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3i\\</span>
<span class="token operator">&gt;</span> This is an inserted line.&#39; data4.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is an inserted line.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u518D\u6BD4\u5982\u8BF4\uFF0C\u5C06\u4E00\u4E2A\u65B0\u884C\u9644\u52A0\u5230\u6570\u636E\u6D41\u4E2D\u7B2C\u4E09\u884C\u540E\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3a\\</span>
<span class="token operator">&gt;</span> This is an appended line.&#39; data4.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is an appended line.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5982\u679C\u4F60\u60F3\u5C06\u4E00\u4E2A\u591A\u884C\u6570\u636E\u6DFB\u52A0\u5230\u6570\u636E\u6D41\u4E2D\uFF0C\u53EA\u9700\u5BF9\u8981\u63D2\u5165\u6216\u9644\u52A0\u7684\u6587\u672C\u4E2D\u7684\u6BCF\u4E00\u884C\u672B\u5C3E\uFF08\u9664\u6700\u540E\u4E00\u884C\uFF09\u6DFB\u52A0\u53CD\u659C\u7EBF\u5373\u53EF\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;1i\\</span>
<span class="token operator">&gt;</span> This is one line of new text.<span class="token punctuation">\\</span>
<span class="token operator">&gt;</span> This is another line of new text.&#39; data6.txt
This is one line of new text.
This is another line of new text.
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u6307\u5B9A\u7684\u4E24\u884C\u90FD\u4F1A\u88AB\u6DFB\u52A0\u5230\u6570\u636E\u6D41\u4E2D\u3002</p><h4 id="sed-c-\u66FF\u6362\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-c-\u66FF\u6362\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed c\\ \u66FF\u6362\u811A\u672C\u547D\u4EE4</h4><p>c\\ \u547D\u4EE4\u8868\u793A\u5C06\u6307\u5B9A\u884C\u4E2D\u7684\u6240\u6709\u5185\u5BB9\uFF0C\u66FF\u6362\u6210\u8BE5\u9009\u9879\u540E\u9762\u7684\u5B57\u7B26\u4E32\u3002\u8BE5\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>c<span class="token punctuation">\\</span>\u7528\u4E8E\u66FF\u6362\u7684\u65B0\u6587\u672C
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3c\\</span>
<span class="token operator">&gt;</span> This is a changed line of text.<span class="token string">&#39; data4.txt
This is line number 1.
This is line number 2.
This is a changed line of text.
This is line number 4.
\u5728\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0Csed \u7F16\u8F91\u5668\u4F1A\u4FEE\u6539\u7B2C\u4E09\u884C\u4E2D\u7684\u6587\u672C\uFF0C\u5176\u5B9E\uFF0C\u4E0B\u9762\u7684\u5199\u6CD5\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u6B64\u76EE\u7684\uFF1A
[root@localhost ~]# sed &#39;</span>/number <span class="token number">3</span>/c<span class="token punctuation">\\</span>
<span class="token operator">&gt;</span> This is a changed line of text.&#39; data4.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is a changed line of text.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="sed-y-\u8F6C\u6362\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-y-\u8F6C\u6362\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed y \u8F6C\u6362\u811A\u672C\u547D\u4EE4</h4><p>y \u8F6C\u6362\u547D\u4EE4\u662F\u552F\u4E00\u53EF\u4EE5\u5904\u7406\u5355\u4E2A\u5B57\u7B26\u7684 <code>sed</code> \u811A\u672C\u547D\u4EE4\uFF0C\u5176\u57FA\u672C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>y/inchars/outchars/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8F6C\u6362\u547D\u4EE4\u4F1A\u5BF9 inchars \u548C outchars \u503C\u8FDB\u884C\u4E00\u5BF9\u4E00\u7684\u6620\u5C04\uFF0C\u5373 inchars \u4E2D\u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\u4F1A\u88AB\u8F6C\u6362\u4E3A outchars \u4E2D\u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\uFF0C\u7B2C\u4E8C\u4E2A\u5B57\u7B26\u4F1A\u88AB\u8F6C\u6362\u6210 outchars \u4E2D\u7684\u7B2C\u4E8C\u4E2A\u5B57\u7B26...\u8FD9\u4E2A\u6620\u5C04\u8FC7\u7A0B\u4F1A\u4E00\u76F4\u6301\u7EED\u5230\u5904\u7406\u5B8C\u6307\u5B9A\u5B57\u7B26\u3002\u5982\u679C inchars \u548C outchars \u7684\u957F\u5EA6\u4E0D\u540C\uFF0C\u5219 sed \u4F1A\u4EA7\u751F\u4E00\u6761\u9519\u8BEF\u6D88\u606F\u3002</p><p>\u4E3E\u4E2A\u7B80\u5355\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data5.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is line number <span class="token number">1</span> again.
This is yet another line.
This is the last line <span class="token keyword">in</span> the file.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;y/123/789/&#39; data5.txt</span>
This is line number <span class="token number">7</span>.
This is line number <span class="token number">8</span>.
This is line number <span class="token number">9</span>.
This is line number <span class="token number">4</span>.
This is line number <span class="token number">7</span> again.
This is yet another line.
This is the last line <span class="token keyword">in</span> the file.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0Cinchars \u6A21\u5F0F\u4E2D\u6307\u5B9A\u5B57\u7B26\u7684\u6BCF\u4E2A\u5B9E\u4F8B\u90FD\u4F1A\u88AB\u66FF\u6362\u6210 outchars \u6A21\u5F0F\u4E2D\u76F8\u540C\u4F4D\u7F6E\u7684\u90A3\u4E2A\u5B57\u7B26\u3002</p><p>\u8F6C\u6362\u547D\u4EE4\u662F\u4E00\u4E2A\u5168\u5C40\u547D\u4EE4\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u4F1A\u5728\u6587\u672C\u884C\u4E2D\u627E\u5230\u7684\u6240\u6709\u6307\u5B9A\u5B57\u7B26\u81EA\u52A8\u8FDB\u884C\u8F6C\u6362\uFF0C\u800C\u4E0D\u4F1A\u8003\u8651\u5B83\u4EEC\u51FA\u73B0\u7684\u4F4D\u7F6E\uFF0C\u518D\u6253\u4E2A\u6BD4\u65B9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;This 1 is a test of 1 try.&quot; | sed &#39;y/123/456/&#39;</span>
This <span class="token number">4</span> is a <span class="token builtin class-name">test</span> of <span class="token number">4</span> try.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>sed</code> \u8F6C\u6362\u4E86\u5728\u6587\u672C\u884C\u4E2D\u5339\u914D\u5230\u7684\u5B57\u7B26 1 \u7684\u4E24\u4E2A\u5B9E\u4F8B\uFF0C\u6211\u4EEC\u65E0\u6CD5\u9650\u5B9A\u53EA\u8F6C\u6362\u5728\u7279\u5B9A\u5730\u65B9\u51FA\u73B0\u7684\u5B57\u7B26\u3002</p><h4 id="sed-p-\u6253\u5370\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-p-\u6253\u5370\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed p \u6253\u5370\u811A\u672C\u547D\u4EE4</h4><p>p \u547D\u4EE4\u8868\u793A\u641C\u7D22\u7B26\u53F7\u6761\u4EF6\u7684\u884C\uFF0C\u5E76\u8F93\u51FA\u8BE5\u884C\u7684\u5185\u5BB9\uFF0C\u6B64\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[address]p
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>p \u547D\u4EE4\u5E38\u89C1\u7684\u7528\u6CD5\u662F\u6253\u5370\u5305\u542B\u5339\u914D\u6587\u672C\u6A21\u5F0F\u7684\u884C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data6.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/number 3/p&#39; data6.txt</span>
This is line number <span class="token number">3</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u7528 -n \u9009\u9879\u548C p \u547D\u4EE4\u914D\u5408\u4F7F\u7528\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7981\u6B62\u8F93\u51FA\u5176\u4ED6\u884C\uFF0C\u53EA\u6253\u5370\u5305\u542B\u5339\u914D\u6587\u672C\u6A21\u5F0F\u7684\u884C\u3002</p><p>\u5982\u679C\u9700\u8981\u5728\u4FEE\u6539\u4E4B\u524D\u67E5\u770B\u884C\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u6253\u5370\u547D\u4EE4\uFF0C\u6BD4\u5982\u4E0E\u66FF\u6362\u6216\u4FEE\u6539\u547D\u4EE4\u4E00\u8D77\u4F7F\u7528\u3002\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u811A\u672C\u5728\u4FEE\u6539\u884C\u4E4B\u524D\u663E\u793A\u8BE5\u884C\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/3/{</span>
<span class="token operator">&gt;</span> p
<span class="token operator">&gt;</span> s/line/test/p
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39; data6.txt
This is line number <span class="token number">3</span>.
This is <span class="token builtin class-name">test</span> number <span class="token number">3</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>sed</code> \u547D\u4EE4\u4F1A\u67E5\u627E\u5305\u542B\u6570\u5B57 3 \u7684\u884C\uFF0C\u7136\u540E\u6267\u884C\u4E24\u6761\u547D\u4EE4\u3002\u9996\u5148\uFF0C\u811A\u672C\u7528 p \u547D\u4EE4\u6765\u6253\u5370\u51FA\u539F\u59CB\u884C\uFF1B\u7136\u540E\u5B83\u7528 s \u547D\u4EE4\u66FF\u6362\u6587\u672C\uFF0C\u5E76\u7528 p \u6807\u8BB0\u6253\u5370\u51FA\u66FF\u6362\u7ED3\u679C\u3002\u8F93\u51FA\u540C\u65F6\u663E\u793A\u4E86\u539F\u6765\u7684\u884C\u6587\u672C\u548C\u65B0\u7684\u884C\u6587\u672C\u3002</p><h4 id="sed-w-\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-w-\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed w \u811A\u672C\u547D\u4EE4</h4><p>w \u547D\u4EE4\u7528\u6765\u5C06\u6587\u672C\u4E2D\u6307\u5B9A\u884C\u7684\u5185\u5BB9\u5199\u5165\u6587\u4EF6\u4E2D\uFF0C\u6B64\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>w filename
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u91CC\u7684 filename \u8868\u793A\u6587\u4EF6\u540D\uFF0C\u53EF\u4EE5\u4F7F\u7528\u76F8\u5BF9\u8DEF\u5F84\u6216\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u4F46\u4E0D\u7BA1\u662F\u54EA\u79CD\uFF0C\u8FD0\u884C <code>sed</code> \u547D\u4EE4\u7684\u7528\u6237\u90FD\u5FC5\u987B\u6709\u6587\u4EF6\u7684\u5199\u6743\u9650\u3002</p><p>\u4E0B\u9762\u7684\u4F8B\u5B50\u662F\u5C06\u6570\u636E\u6D41\u4E2D\u7684\u524D\u4E24\u884C\u6253\u5370\u5230\u4E00\u4E2A\u6587\u672C\u6587\u4EF6\u4E2D\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;1,2w test.txt&#39; data6.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat test.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u5F53\u7136\uFF0C\u5982\u679C\u4E0D\u60F3\u8BA9\u884C\u76F4\u63A5\u8F93\u51FA\uFF0C\u53EF\u4EE5\u7528 -n \u9009\u9879\uFF0C\u518D\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data7.txt</span>
Blum, R    Browncoat
McGuiness, A Alliance
Bresnahan, C Browncoat
Harken, C   Alliance
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/Browncoat/w Browncoats.txt&#39; data7.txt</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat Browncoats.txt</span>
Blum, R    Browncoat
Bresnahan, C Browncoat
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u901A\u8FC7\u4F7F\u7528 w \u811A\u672C\u547D\u4EE4\uFF0C<code>sed</code> \u53EF\u4EE5\u5B9E\u73B0\u5C06\u5305\u542B\u6587\u672C\u6A21\u5F0F\u7684\u6570\u636E\u884C\u5199\u5165\u76EE\u6807\u6587\u4EF6\u3002</p><h4 id="sed-r-\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-r-\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed r \u811A\u672C\u547D\u4EE4</h4><p>r \u547D\u4EE4\u7528\u4E8E\u5C06\u4E00\u4E2A\u72EC\u7ACB\u6587\u4EF6\u7684\u6570\u636E\u63D2\u5165\u5230\u5F53\u524D\u6570\u636E\u6D41\u7684\u6307\u5B9A\u4F4D\u7F6E\uFF0C\u8BE5\u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>r filename
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>sed</code> \u547D\u4EE4\u4F1A\u5C06 filename \u6587\u4EF6\u4E2D\u7684\u5185\u5BB9\u63D2\u5165\u5230 address \u6307\u5B9A\u884C\u7684\u540E\u9762\uFF0C\u6BD4\u5982\u8BF4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data8.txt</span>
This is an added line.
This is the second added line.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;3r data8.txt&#39; data6.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is an added line.
This is the second added line.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5982\u679C\u4F60\u60F3\u5C06\u6307\u5B9A\u6587\u4EF6\u4E2D\u7684\u6570\u636E\u63D2\u5165\u5230\u6570\u636E\u6D41\u7684\u672B\u5C3E\uFF0C\u53EF\u4EE5\u4F7F\u7528 $ \u5730\u5740\u7B26\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;$r data8.txt&#39; data6.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is an added line.
This is the second added line.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="sed-q-\u9000\u51FA\u811A\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#sed-q-\u9000\u51FA\u811A\u672C\u547D\u4EE4" aria-hidden="true">#</a> sed q \u9000\u51FA\u811A\u672C\u547D\u4EE4</h4><p>q \u547D\u4EE4\u7684\u4F5C\u7528\u662F\u4F7F <code>sed</code> \u547D\u4EE4\u5728\u7B2C\u4E00\u6B21\u5339\u914D\u4EFB\u52A1\u7ED3\u675F\u540E\uFF0C\u9000\u51FA <code>sed</code> \u7A0B\u5E8F\uFF0C\u4E0D\u518D\u8FDB\u884C\u5BF9\u540E\u7EED\u6570\u636E\u7684\u5904\u7406\u3002</p><p>\u6BD4\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;2q&#39; test.txt</span>
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C<code>sed</code> \u547D\u4EE4\u5728\u6253\u5370\u8F93\u51FA\u7B2C 2 \u884C\u4E4B\u540E\uFF0C\u5C31\u505C\u6B62\u4E86\uFF0C\u662F q \u547D\u4EE4\u9020\u6210\u7684\uFF0C\u518D\u6BD4\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;/number 1/{ s/number 1/number 0/;q; }&#39; test.txt</span>
This is line number <span class="token number">0</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4F7F\u7528 q \u547D\u4EE4\u4E4B\u540E\uFF0C<code>sed</code> \u547D\u4EE4\u4F1A\u5728\u5339\u914D\u5230 number 1 \u65F6\uFF0C\u5C06\u5176\u66FF\u6362\u6210 number 0\uFF0C\u7136\u540E\u76F4\u63A5\u9000\u51FA\u3002</p><h3 id="sed-\u811A\u672C\u547D\u4EE4\u7684\u5BFB\u5740\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#sed-\u811A\u672C\u547D\u4EE4\u7684\u5BFB\u5740\u65B9\u5F0F" aria-hidden="true">#</a> sed \u811A\u672C\u547D\u4EE4\u7684\u5BFB\u5740\u65B9\u5F0F</h3><p>\u524D\u9762\u5728\u4ECB\u7ECD\u5404\u4E2A\u811A\u672C\u547D\u4EE4\u65F6\uFF0C\u6211\u4EEC\u4E00\u76F4\u5FFD\u7565\u4E86\u5BF9 address \u90E8\u5206\u7684\u4ECB\u7ECD\u3002\u5BF9\u5404\u4E2A\u811A\u672C\u547D\u4EE4\u6765\u8BF4\uFF0Caddress \u7528\u6765\u8868\u660E\u8BE5\u811A\u672C\u547D\u4EE4\u4F5C\u7528\u5230\u6587\u672C\u4E2D\u7684\u5177\u4F53\u884C\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>sed</code> \u547D\u4EE4\u4F1A\u4F5C\u7528\u4E8E\u6587\u672C\u6570\u636E\u7684\u6240\u6709\u884C\u3002\u5982\u679C\u53EA\u60F3\u5C06\u547D\u4EE4\u4F5C\u7528\u4E8E\u7279\u5B9A\u884C\u6216\u67D0\u4E9B\u884C\uFF0C\u5219\u5FC5\u987B\u5199\u660E address \u90E8\u5206\uFF0C\u8868\u793A\u7684\u65B9\u6CD5\u6709\u4EE5\u4E0B 2 \u79CD\uFF1A</p><ol><li>\u4EE5\u6570\u5B57\u5F62\u5F0F\u6307\u5B9A\u884C\u533A\u95F4\uFF1B</li><li>\u7528\u6587\u672C\u6A21\u5F0F\u6307\u5B9A\u5177\u4F53\u884C\u533A\u95F4\u3002</li></ol><p>\u4EE5\u4E0A\u4E24\u79CD\u5F62\u5F0F\u90FD\u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B\u8FD9 2 \u79CD\u683C\u5F0F\uFF0C\u5206\u522B\u662F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>address<span class="token punctuation">]</span>\u811A\u672C\u547D\u4EE4

 \u6216\u8005

 address <span class="token punctuation">{</span>
   \u591A\u4E2A\u811A\u672C\u547D\u4EE4
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4EE5\u4E0A\u4E24\u79CD\u5F62\u5F0F\u5728\u524D\u9762\u4F8B\u5B50\u4E2D\u90FD\u6709\u5177\u4F53\u5B9E\u4F8B\uFF0C\u56E0\u6B64\u8FD9\u91CC\u4E0D\u518D\u505A\u8FC7\u591A\u8D58\u8FF0\u3002</p><h4 id="\u4EE5\u6570\u5B57\u5F62\u5F0F\u6307\u5B9A\u884C\u533A\u95F4" tabindex="-1"><a class="header-anchor" href="#\u4EE5\u6570\u5B57\u5F62\u5F0F\u6307\u5B9A\u884C\u533A\u95F4" aria-hidden="true">#</a> \u4EE5\u6570\u5B57\u5F62\u5F0F\u6307\u5B9A\u884C\u533A\u95F4</h4><p>\u5F53\u4F7F\u7528\u6570\u5B57\u65B9\u5F0F\u7684\u884C\u5BFB\u5740\u65F6\uFF0C\u53EF\u4EE5\u7528\u884C\u5728\u6587\u672C\u6D41\u4E2D\u7684\u884C\u4F4D\u7F6E\u6765\u5F15\u7528\u3002<code>sed</code> \u4F1A\u5C06\u6587\u672C\u6D41\u4E2D\u7684\u7B2C\u4E00\u884C\u7F16\u53F7\u4E3A 1\uFF0C\u7136\u540E\u7EE7\u7EED\u6309\u987A\u5E8F\u4E3A\u63A5\u4E0B\u6765\u7684\u884C\u5206\u914D\u884C\u53F7\u3002</p><p>\u5728\u811A\u672C\u547D\u4EE4\u4E2D\uFF0C\u6307\u5B9A\u7684\u5730\u5740\u53EF\u4EE5\u662F\u5355\u4E2A\u884C\u53F7\uFF0C\u6216\u662F\u7528\u8D77\u59CB\u884C\u53F7\u3001\u9017\u53F7\u4EE5\u53CA\u7ED3\u5C3E\u884C\u53F7\u6307\u5B9A\u7684\u4E00\u5B9A\u533A\u95F4\u8303\u56F4\u5185\u7684\u884C\u3002\u8FD9\u91CC\u4E3E\u4E00\u4E2A <code>sed</code> \u547D\u4EE4\u4F5C\u7528\u5230\u6307\u5B9A\u884C\u53F7\u7684\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#sed &#39;2s/dog/cat/&#39; data9.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy dog
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C<code>sed</code> \u53EA\u4FEE\u6539\u5730\u5740\u6307\u5B9A\u7684\u7B2C\u4E8C\u884C\u7684\u6587\u672C\u3002\u4E0B\u9762\u7684\u4F8B\u5B50\u4E2D\u4F7F\u7528\u4E86\u884C\u5730\u5740\u533A\u95F4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;2,3s/dog/cat/&#39; data9.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy dog
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u5728\u6B64\u57FA\u7840\u4E0A\uFF0C\u5982\u679C\u60F3\u5C06\u547D\u4EE4\u4F5C\u7528\u5230\u6587\u672C\u4E2D\u4ECE\u67D0\u884C\u5F00\u59CB\u7684\u6240\u6709\u884C\uFF0C\u53EF\u4EE5\u7528\u7279\u6B8A\u5730\u5740---\u7F8E\u5143\u7B26\uFF08$\uFF09\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;2,$s/dog/cat/&#39; data9.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="\u7528\u6587\u672C\u6A21\u5F0F\u6307\u5B9A\u884C\u533A\u95F4" tabindex="-1"><a class="header-anchor" href="#\u7528\u6587\u672C\u6A21\u5F0F\u6307\u5B9A\u884C\u533A\u95F4" aria-hidden="true">#</a> \u7528\u6587\u672C\u6A21\u5F0F\u6307\u5B9A\u884C\u533A\u95F4</h4><p><code>sed</code> \u5141\u8BB8\u6307\u5B9A\u6587\u672C\u6A21\u5F0F\u6765\u8FC7\u6EE4\u51FA\u547D\u4EE4\u8981\u4F5C\u7528\u7684\u884C\uFF0C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/pattern/command
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6CE8\u610F\uFF0C\u5FC5\u987B\u7528\u6B63\u659C\u7EBF\u5C06\u8981\u6307\u5B9A\u7684 pattern \u5C01\u8D77\u6765\uFF0C<code>sed</code> \u4F1A\u5C06\u8BE5\u547D\u4EE4\u4F5C\u7528\u5230\u5305\u542B\u6307\u5B9A\u6587\u672C\u6A21\u5F0F\u7684\u884C\u4E0A\u3002</p><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF0C\u5982\u679C\u4F60\u60F3\u53EA\u4FEE\u6539\u7528\u6237 demo \u7684\u9ED8\u8BA4 shell\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>sed</code> \u547D\u4EE4\uFF0C\u6267\u884C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grep demo /etc/passwd</span>
demo:x:502:502::/home/Samantha:/bin/bash
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed &#39;/demo/s/bash/csh/&#39; /etc/passwd</span>
root:x:0:0:root:/root:/bin/bash
<span class="token punctuation">..</span>.
demo:x:502:502::/home/demo:/bin/csh
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u867D\u7136\u4F7F\u7528\u56FA\u5B9A\u6587\u672C\u6A21\u5F0F\u80FD\u5E2E\u4F60\u8FC7\u6EE4\u51FA\u7279\u5B9A\u7684\u503C\uFF0C\u5C31\u8DDF\u4E0A\u9762\u8FD9\u4E2A\u7528\u6237\u540D\u7684\u4F8B\u5B50\u4E00\u6837\uFF0C\u4F46\u5176\u4F5C\u7528\u96BE\u514D\u6709\u9650\uFF0C\u56E0\u6B64\uFF0C<code>sed</code> \u5141\u8BB8\u5728\u6587\u672C\u6A21\u5F0F\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u6307\u660E\u4F5C\u7528\u7684\u5177\u4F53\u884C\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u5141\u8BB8\u521B\u5EFA\u9AD8\u7EA7\u6587\u672C\u6A21\u5F0F\u5339\u914D\u8868\u8FBE\u5F0F\u6765\u5339\u914D\u5404\u79CD\u6570\u636E\u3002\u8FD9\u4E9B\u8868\u8FBE\u5F0F\u7ED3\u5408\u4E86\u4E00\u7CFB\u5217\u901A\u914D\u7B26\u3001\u7279\u6B8A\u5B57\u7B26\u4EE5\u53CA\u56FA\u5B9A\u6587\u672C\u5B57\u7B26\u6765\u751F\u6210\u80FD\u591F\u5339\u914D\u51E0\u4E4E\u4EFB\u4F55\u5F62\u5F0F\u6587\u672C\u7684\u7B80\u7EC3\u6A21\u5F0F\u3002</p><p>\u793A\u4F8B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat test.txt</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>First Wed<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
h1Helloh1
h2Helloh2
h3Helloh3
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
<span class="token comment">#\u4F7F\u7528\u6B63\u5219\u8868\u793A\u5F0F\u7ED9\u6240\u6709\u7B2C\u4E00\u4E2A\u7684h1\u3001h2\u3001h3\u6DFB\u52A0&lt;&gt;\uFF0C\u7ED9\u7B2C\u4E8C\u4E2Ah1\u3001h2\u3001h3\u6DFB\u52A0&lt;/&gt;</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat sed.sh</span>
/h<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>/<span class="token punctuation">{</span>
    s//<span class="token punctuation">\\</span><span class="token operator">&lt;&amp;</span><span class="token punctuation">\\</span><span class="token operator">&gt;</span>/1
    s//<span class="token punctuation">\\</span><span class="token operator">&lt;</span><span class="token punctuation">\\</span>/<span class="token operator">&amp;</span><span class="token punctuation">\\</span><span class="token operator">&gt;</span>/2
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># sed -f sed.sh test.txt</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Hello<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>Hello<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>Hello<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="awk-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#awk-\u547D\u4EE4" aria-hidden="true">#</a> awk \u547D\u4EE4</h2><p>\u9664\u4E86\u4F7F\u7528 <code>sed</code> \u547D\u4EE4\uFF0CLinux \u7CFB\u7EDF\u4E2D\u8FD8\u6709\u4E00\u4E2A\u529F\u80FD\u66F4\u52A0\u5F3A\u5927\u7684\u6587\u672C\u6570\u636E\u5904\u7406\u5DE5\u5177\uFF0C\u5C31\u662F <code>awk</code>\u3002\u5B83\u8BDE\u751F\u4E8E 20 \u4E16\u7EAA 70 \u5E74\u4EE3\u672B\u671F\uFF0C\u8FD9\u4E5F\u8BB8\u662F\u5B83\u5F71\u54CD\u4E86\u4F17\u591A Linux \u7528\u6237\u7684\u539F\u56E0\u4E4B\u4E00\u3002</p><p>\u66FE\u6709\u4EBA\u63A8\u6D4B <code>awk</code> \u547D\u4EE4\u7684\u540D\u5B57\u6765\u6E90\u4E8E awkward \u8FD9\u4E2A\u5355\u8BCD\u3002\u5176\u5B9E\u4E0D\u7136\uFF0C\u6B64\u547D\u4EE4\u7684\u8BBE\u8BA1\u8005\u6709 3 \u4F4D\uFF0C\u4ED6\u4EEC\u7684\u59D3\u5206\u522B\u662F Aho\u3001Weingberger \u548C Kernighan\uFF0Cawk \u5C31\u53D6\u81EA\u8FD9 3 \u4E3A\u5927\u5E08\u59D3\u7684\u9996\u5B57\u6BCD\u3002</p><p>\u548C <code>sed</code> \u547D\u4EE4\u7C7B\u4F3C\uFF0C<code>awk</code> \u547D\u4EE4\u4E5F\u662F\u9010\u884C\u626B\u63CF\u6587\u4EF6\uFF08\u4ECE\u7B2C 1 \u884C\u5230\u6700\u540E\u4E00\u884C\uFF09\uFF0C\u5BFB\u627E\u542B\u6709\u76EE\u6807\u6587\u672C\u7684\u884C\uFF0C\u5982\u679C\u5339\u914D\u6210\u529F\uFF0C\u5219\u4F1A\u5728\u8BE5\u884C\u4E0A\u6267\u884C\u7528\u6237\u60F3\u8981\u7684\u64CD\u4F5C\uFF1B\u53CD\u4E4B\uFF0C\u5219\u4E0D\u5BF9\u884C\u505A\u4EFB\u4F55\u5904\u7406\u3002</p><p><code>awk</code> \u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk [\u9009\u9879] &#39;[\u811A\u672C\u547D\u4EE4]&#39; \u6587\u4EF6\u540D</span>
\u9009\u9879\uFF1A
	-F fs		\uFF1A\u6307\u5B9A\u4EE5 fs \u4F5C\u4E3A\u8F93\u5165\u884C\u7684\u5206\u9694\u7B26\uFF0Cawk \u547D\u4EE4\u9ED8\u8BA4\u5206\u9694\u7B26\u4E3A\u7A7A\u683C\u6216\u5236\u8868\u7B26
	-f <span class="token function">file</span>		\uFF1A\u4ECE\u811A\u672C\u6587\u4EF6\u4E2D\u8BFB\u53D6 <span class="token function">awk</span> \u811A\u672C\u6307\u4EE4\uFF0C\u4EE5\u53D6\u4EE3\u76F4\u63A5\u5728\u547D\u4EE4\u884C\u4E2D\u8F93\u5165\u6307\u4EE4
	-v <span class="token assign-left variable">var</span><span class="token operator">=</span>val	\uFF1A\u5728\u6267\u884C\u5904\u7406\u8FC7\u7A0B\u4E4B\u524D\uFF0C\u8BBE\u7F6E\u4E00\u4E2A\u53D8\u91CF var\uFF0C\u5E76\u7ED9\u5176\u8BBE\u5907\u521D\u59CB\u503C\u4E3A val
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>awk</code> \u7684\u5F3A\u5927\u4E4B\u5904\u5728\u4E8E\u811A\u672C\u547D\u4EE4\uFF0C\u5B83\u7531 2 \u90E8\u5206\u7EC4\u6210\uFF0C\u5206\u522B\u4E3A\u5339\u914D\u89C4\u5219\u548C\u6267\u884C\u547D\u4EE4\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token string">&#39;\u5339\u914D\u89C4\u5219{\u6267\u884C\u547D\u4EE4}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u91CC\u7684\u5339\u914D\u89C4\u5219\uFF0C\u548C <code>sed</code> \u547D\u4EE4\u4E2D\u7684 address \u90E8\u5206\u4F5C\u7528\u76F8\u540C\uFF0C\u7528\u6765\u6307\u5B9A\u811A\u672C\u547D\u4EE4\u53EF\u4EE5\u4F5C\u7528\u5230\u6587\u672C\u5185\u5BB9\u4E2D\u7684\u5177\u4F53\u884C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5B57\u7B26\u4E32\uFF08\u6BD4\u5982 /demo/\uFF0C\u8868\u793A\u67E5\u770B\u542B\u6709 demo \u5B57\u7B26\u4E32\u7684\u884C\uFF09\u6216\u8005\u6B63\u5219\u8868\u8FBE\u5F0F\u6307\u5B9A\u3002\u53E6\u5916\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C<strong>\u6574\u4E2A\u811A\u672C\u547D\u4EE4\u662F\u7528\u5355\u5F15\u53F7 &#39; &#39; \u62EC\u8D77\uFF0C\u800C\u5176\u4E2D\u7684\u6267\u884C\u547D\u4EE4\u90E8\u5206\u9700\u8981\u7528\u5927\u62EC\u53F7 { } \u62EC\u8D77\u6765</strong>\u3002</p><p>\u5728 <code>awk</code> \u7A0B\u5E8F\u6267\u884C\u65F6\uFF0C\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u6267\u884C\u547D\u4EE4\uFF0C\u5219\u9ED8\u8BA4\u4F1A\u628A\u5339\u914D\u7684\u884C\u8F93\u51FA\uFF1B\u5982\u679C\u4E0D\u6307\u5B9A\u5339\u914D\u89C4\u5219\uFF0C\u5219\u9ED8\u8BA4\u5339\u914D\u6587\u672C\u4E2D\u6240\u6709\u7684\u884C\u3002</p><p>\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;/^$/ {print &quot;Blank line&quot;}&#39; test.txt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5728\u6B64\u547D\u4EE4\u4E2D\uFF0C<code>/^$/</code> \u662F\u4E00\u4E2A\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u529F\u80FD\u662F\u5339\u914D\u6587\u672C\u4E2D\u7684\u7A7A\u767D\u884C\uFF0C\u540C\u65F6\u53EF\u4EE5\u770B\u5230\uFF0C\u6267\u884C\u547D\u4EE4\u4F7F\u7528\u7684\u662F print \u547D\u4EE4\uFF0C\u6B64\u547D\u4EE4\u7ECF\u5E38\u4F1A\u4F7F\u7528\uFF0C\u5B83\u7684\u4F5C\u7528\u5F88\u7B80\u5355\uFF0C\u5C31\u662F\u5C06\u6307\u5B9A\u7684\u6587\u672C\u8FDB\u884C\u8F93\u51FA\u3002\u56E0\u6B64\uFF0C\u6574\u4E2A\u547D\u4EE4\u7684\u529F\u80FD\u662F\uFF0C\u5982\u679C test.txt \u6709 N \u4E2A\u7A7A\u767D\u884C\uFF0C\u90A3\u4E48\u6267\u884C\u6B64\u547D\u4EE4\u4F1A\u8F93\u51FA N \u4E2A Blank line\u3002</p><h3 id="awk-\u57FA\u672C\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#awk-\u57FA\u672C\u7528\u6CD5" aria-hidden="true">#</a> awk \u57FA\u672C\u7528\u6CD5</h3><h4 id="awk-\u5BF9\u5B57\u6BB5\u7684\u63D0\u53D6-\u5217" tabindex="-1"><a class="header-anchor" href="#awk-\u5BF9\u5B57\u6BB5\u7684\u63D0\u53D6-\u5217" aria-hidden="true">#</a> awk \u5BF9\u5B57\u6BB5\u7684\u63D0\u53D6\uFF08\u5217\uFF09</h4><p><code>awk</code> \u7684\u4E3B\u8981\u7279\u6027\u4E4B\u4E00\u662F\u5176\u5904\u7406\u6587\u672C\u6587\u4EF6\u4E2D\u6570\u636E\u7684\u80FD\u529B\uFF0C\u5B83\u4F1A\u81EA\u52A8\u7ED9\u4E00\u884C\u4E2D\u7684\u6BCF\u4E2A\u6570\u636E\u5143\u7D20\u5206\u914D\u4E00\u4E2A\u53D8\u91CF\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>awk</code> \u4F1A\u5C06\u5982\u4E0B\u53D8\u91CF\u5206\u914D\u7ED9\u5B83\u5728\u6587\u672C\u884C\u4E2D\u53D1\u73B0\u7684\u6570\u636E\u5B57\u6BB5\uFF1A</p><ul><li>$0 \u4EE3\u8868\u6574\u4E2A\u6587\u672C\u884C\uFF1B</li><li>$1 \u4EE3\u8868\u6587\u672C\u884C\u4E2D\u7684\u7B2C 1 \u4E2A\u6570\u636E\u5B57\u6BB5\uFF1B</li><li>$2 \u4EE3\u8868\u6587\u672C\u884C\u4E2D\u7684\u7B2C 2 \u4E2A\u6570\u636E\u5B57\u6BB5\uFF1B</li><li>$N \u4EE3\u8868\u6587\u672C\u884C\u4E2D\u7684\u7B2C N \u4E2A\u6570\u636E\u5B57\u6BB5\uFF1B</li><li>$NF \u4EE3\u8868\u6587\u672C\u884C\u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u6570\u636E\u5B57\u6BB5\u3002</li></ul><p>\u524D\u9762\u8BF4\u8FC7\uFF0C\u5728 <code>awk</code> \u4E2D\uFF0C\u9ED8\u8BA4\u7684\u5B57\u6BB5\u5206\u9694\u7B26\u662F\u4EFB\u610F\u7684\u7A7A\u767D\u5B57\u7B26\uFF08\u4F8B\u5982\u7A7A\u683C\u6216\u5236\u8868\u7B26\uFF09\u3002 \u5728\u6587\u672C\u884C\u4E2D\uFF0C\u6BCF\u4E2A\u6570\u636E\u5B57\u6BB5\u90FD\u662F\u901A\u8FC7\u5B57\u6BB5\u5206\u9694\u7B26\u5212\u5206\u7684\u3002<code>awk</code> \u5728\u8BFB\u53D6\u4E00\u884C\u6587\u672C\u65F6\uFF0C\u4F1A\u7528\u9884\u5B9A\u4E49\u7684\u5B57\u6BB5\u5206\u9694\u7B26\u5212\u5206\u6BCF\u4E2A\u6570\u636E\u5B57\u6BB5\u3002</p><p>\u6240\u4EE5\u5728\u4E0B\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C<code>awk</code> \u7A0B\u5E8F\u8BFB\u53D6\u6587\u672C\u6587\u4EF6\uFF0C\u53EA\u663E\u793A\u7B2C 1 \u4E2A\u6570\u636E\u5B57\u6BB5\u7684\u503C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data2.txt</span>
One line of <span class="token builtin class-name">test</span> text.
Two lines of <span class="token builtin class-name">test</span> text.
Three lines of <span class="token builtin class-name">test</span> text.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{print $1}&#39; data2.txt</span>
One
Two
Three
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u8BE5\u7A0B\u5E8F\u7528 $1 \u5B57\u6BB5\u53D8\u91CF\u6765\u8868\u793A\u201C\u4EC5\u663E\u793A\u6BCF\u884C\u6587\u672C\u7684\u7B2C 1 \u4E2A\u6570\u636E\u5B57\u6BB5\u201D\u3002\u5F53\u7136\uFF0C\u5982\u679C\u4F60\u8981\u8BFB\u53D6\u91C7\u7528\u4E86\u5176\u4ED6\u5B57\u6BB5\u5206\u9694\u7B26\u7684\u6587\u4EF6\uFF0C\u53EF\u4EE5\u7528 -F \u9009\u9879\u624B\u52A8\u6307\u5B9A\u3002</p><h4 id="awk-\u5BF9\u8BB0\u5F55\u7684\u63D0\u53D6-\u884C" tabindex="-1"><a class="header-anchor" href="#awk-\u5BF9\u8BB0\u5F55\u7684\u63D0\u53D6-\u884C" aria-hidden="true">#</a> awk \u5BF9\u8BB0\u5F55\u7684\u63D0\u53D6\uFF08\u884C\uFF09</h4><p>\u63D0\u53D6\u4E00\u4E2A\u6587\u672C\u4E2D\u7684\u4E00\u884C\u5E76\u6253\u5370\u8F93\u51FA\uFF0C\u8BB0\u5F55\u7684\u63D0\u53D6\u65B9\u6CD5\u6709\u4E24\u79CD\uFF1A</p><ul><li>\u901A\u8FC7\u884C\u53F7</li><li>\u901A\u8FC7\u6B63\u5219\u5339\u914D</li></ul><p>\u4F8B\u5982\uFF1A\u63D0\u53D6test\u4E2D\u7684\u7B2C\u4E09\u884C\uFF08\u6307\u5B9A\u884C\u53F7\u4E3A3\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux ~ <span class="token punctuation">]</span><span class="token comment"># awk &#39;NR==3{print $0}&#39; test</span>
<span class="token number">3</span> the quick brown fox jumps over the lazy cat.
<span class="token punctuation">[</span>root@linux ~ <span class="token punctuation">]</span><span class="token comment"># awk &#39;NR==1{print $1,$3,$5}&#39; /etc/passwd</span>
root <span class="token number">0</span> root
<span class="token punctuation">[</span>root@linux ~ <span class="token punctuation">]</span><span class="token comment"># awk &#39;NR==1{print $1 &quot;-&quot; $3 &quot;-&quot; $5}&#39; /etc/passwd</span>
root-0-root
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="awk-\u811A\u672C\u547D\u4EE4\u4F7F\u7528\u591A\u4E2A\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#awk-\u811A\u672C\u547D\u4EE4\u4F7F\u7528\u591A\u4E2A\u547D\u4EE4" aria-hidden="true">#</a> awk \u811A\u672C\u547D\u4EE4\u4F7F\u7528\u591A\u4E2A\u547D\u4EE4</h4><p><code>awk</code> \u5141\u8BB8\u5C06\u591A\u6761\u547D\u4EE4\u7EC4\u5408\u6210\u4E00\u4E2A\u6B63\u5E38\u7684\u7A0B\u5E8F\u3002\u8981\u5728\u547D\u4EE4\u884C\u4E0A\u7684\u7A0B\u5E8F\u811A\u672C\u4E2D\u4F7F\u7528\u591A\u6761\u547D\u4EE4\uFF0C\u53EA\u8981\u5728\u547D\u4EE4\u4E4B\u95F4\u653E\u4E2A\u5206\u53F7\u5373\u53EF\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo &quot;My name is Rich&quot; | awk &#39;{$4=&quot;Christine&quot;; print $0}&#39;</span>
My name is Christine
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u7B2C\u4E00\u6761\u547D\u4EE4\u4F1A\u7ED9\u5B57\u6BB5\u53D8\u91CF $4 \u8D4B\u503C\u3002\u7B2C\u4E8C\u6761\u547D\u4EE4\u4F1A\u6253\u5370\u6574\u4E2A\u6570\u636E\u5B57\u6BB5\u3002\u53EF\u4EE5\u770B\u5230\uFF0C<code>awk</code> \u7A0B\u5E8F\u5728\u8F93\u51FA\u4E2D\u5DF2\u7ECF\u5C06\u539F\u6587\u672C\u4E2D\u7684\u7B2C\u56DB\u4E2A\u6570\u636E\u5B57\u6BB5\u66FF\u6362\u6210\u4E86\u65B0\u503C\u3002</p><p>\u9664\u6B64\u4E4B\u5916\uFF0C\u4E5F\u53EF\u4EE5\u4E00\u6B21\u4E00\u884C\u5730\u8F93\u5165\u7A0B\u5E8F\u811A\u672C\u547D\u4EE4\uFF0C\u6BD4\u5982\u8BF4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> <span class="token variable">$4</span><span class="token operator">=</span><span class="token string">&quot;Christine&quot;</span>
<span class="token operator">&gt;</span> print <span class="token variable">$0</span><span class="token punctuation">}</span>&#39;
My name is Rich
My name is Christine
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u5728\u4F60\u7528\u4E86\u8868\u793A\u8D77\u59CB\u7684\u5355\u5F15\u53F7\u540E\uFF0Cbash shell \u4F1A\u4F7F\u7528 <code>&gt;</code> \u6765\u63D0\u793A\u8F93\u5165\u66F4\u591A\u6570\u636E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6BCF\u6B21\u5728\u6BCF\u884C\u52A0\u4E00\u6761\u547D\u4EE4\uFF0C\u76F4\u5230\u8F93\u5165\u4E86\u7ED3\u5C3E\u7684\u5355\u5F15\u53F7\u3002</p><p>\u6CE8\u610F\uFF0C\u6B64\u4F8B\u4E2D\u56E0\u4E3A\u6CA1\u6709\u5728\u547D\u4EE4\u884C\u4E2D\u6307\u5B9A\u6587\u4EF6\u540D\uFF0C<code>awk</code> \u7A0B\u5E8F\u9700\u8981\u7528\u6237\u8F93\u5165\u83B7\u5F97\u6570\u636E\uFF0C\u56E0\u6B64\u5F53\u8FD0\u884C\u8FD9\u4E2A\u7A0B\u5E8F\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u4E00\u76F4\u7B49\u7740\u7528\u6237\u8F93\u5165\u6587\u672C\uFF0C\u6B64\u65F6\u5982\u679C\u8981\u9000\u51FA\u7A0B\u5E8F\uFF0C\u53EA\u9700\u6309\u4E0B <kbd>Ctrl</kbd>+<kbd>D</kbd> \u7EC4\u5408\u952E\u5373\u53EF\u3002</p><h4 id="awk-\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#awk-\u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u7A0B\u5E8F" aria-hidden="true">#</a> awk \u4ECE\u6587\u4EF6\u4E2D\u8BFB\u53D6\u7A0B\u5E8F</h4><p>\u8DDF <code>sed</code> \u4E00\u6837\uFF0C<code>awk</code> \u5141\u8BB8\u5C06\u811A\u672C\u547D\u4EE4\u5B58\u50A8\u5230\u6587\u4EF6\u4E2D\uFF0C\u7136\u540E\u518D\u5728\u547D\u4EE4\u884C\u4E2D\u5F15\u7528\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat awk.sh</span>
<span class="token punctuation">{</span>print <span class="token variable">$1</span> <span class="token string">&quot;&#39;s home directory is &quot;</span> <span class="token variable">$6</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -F: -f awk.sh /etc/passwd</span>
root<span class="token string">&#39;s home directory is /root
bin&#39;</span>s home directory is /bin
daemon<span class="token string">&#39;s home directory is /sbin
adm&#39;</span>s home directory is /var/adm
lp<span class="token string">&#39;s home directory is /var/spool/lpd
...
Christine&#39;</span>s home directory is /home/Christine
Samantha<span class="token string">&#39;s home directory is /home/Samantha
Timothy&#39;</span>s home directory is /home/Timothy
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>awk.sh \u811A\u672C\u6587\u4EF6\u4F1A\u4F7F\u7528 print \u547D\u4EE4\u6253\u5370 <code>/etc/passwd</code> \u6587\u4EF6\u7684\u4E3B\u76EE\u5F55\u6570\u636E\u5B57\u6BB5\uFF08\u5B57\u6BB5\u53D8\u91CF $6\uFF09\uFF0C\u4EE5\u53CA userid \u6570\u636E\u5B57\u6BB5\uFF08\u5B57\u6BB5\u53D8\u91CF $1\uFF09\u3002\u6CE8\u610F\uFF0C\u5728\u7A0B\u5E8F\u6587\u4EF6\u4E2D\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u591A\u6761\u547D\u4EE4\uFF0C\u53EA\u8981\u4E00\u6761\u547D\u4EE4\u653E\u4E00\u884C\u5373\u53EF\uFF0C\u4E4B\u95F4\u4E0D\u9700\u8981\u7528\u5206\u53F7\u3002</p><h4 id="awk-begin\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#awk-begin\u5173\u952E\u5B57" aria-hidden="true">#</a> awk BEGIN\u5173\u952E\u5B57</h4><p><code>awk</code> \u4E2D\u8FD8\u53EF\u4EE5\u6307\u5B9A\u811A\u672C\u547D\u4EE4\u7684\u8FD0\u884C\u65F6\u673A\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>awk</code> \u4F1A\u4ECE\u8F93\u5165\u4E2D\u8BFB\u53D6\u4E00\u884C\u6587\u672C\uFF0C\u7136\u540E\u9488\u5BF9\u8BE5\u884C\u7684\u6570\u636E\u6267\u884C\u7A0B\u5E8F\u811A\u672C\uFF0C\u4F46\u6709\u65F6\u53EF\u80FD\u9700\u8981\u5728\u5904\u7406\u6570\u636E\u524D\u8FD0\u884C\u4E00\u4E9B\u811A\u672C\u547D\u4EE4\uFF0C\u8FD9\u5C31\u9700\u8981\u4F7F\u7528 BEGIN \u5173\u952E\u5B57\u3002</p><p>BEGIN \u4F1A\u5F3A\u5236 <code>awk</code> \u5728\u8BFB\u53D6\u6570\u636E\u524D\u6267\u884C\u8BE5\u5173\u952E\u5B57\u540E\u6307\u5B9A\u7684\u811A\u672C\u547D\u4EE4\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data3.txt</span>
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN {print &quot;The data3 File Contents:&quot;}</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>print <span class="token variable">$0</span><span class="token punctuation">}</span>&#39; data3.txt
The data3 File Contents:
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u91CC\u7684\u811A\u672C\u547D\u4EE4\u4E2D\u5206\u4E3A 2 \u90E8\u5206\uFF0CBEGIN \u90E8\u5206\u7684\u811A\u672C\u6307\u4EE4\u4F1A\u5728 awk \u547D\u4EE4\u5904\u7406\u6570\u636E\u524D\u8FD0\u884C\uFF0C\u800C\u771F\u6B63\u7528\u6765\u5904\u7406\u6570\u636E\u7684\u662F\u7B2C\u4E8C\u6BB5\u811A\u672C\u547D\u4EE4\u3002</p><h4 id="awk-end\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#awk-end\u5173\u952E\u5B57" aria-hidden="true">#</a> awk END\u5173\u952E\u5B57</h4><p>\u548C BEGIN \u5173\u952E\u5B57\u76F8\u5BF9\u5E94\uFF0CEND \u5173\u952E\u5B57\u5141\u8BB8\u6211\u4EEC\u6307\u5B9A\u4E00\u4E9B\u811A\u672C\u547D\u4EE4\uFF0C<code>awk</code> \u4F1A\u5728\u8BFB\u5B8C\u6570\u636E\u540E\u6267\u884C\u5B83\u4EEC\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN {print &quot;The data3 File Contents:&quot;}</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>print <span class="token variable">$0</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> END <span class="token punctuation">{</span>print <span class="token string">&quot;End of File&quot;</span><span class="token punctuation">}</span>&#39; data3.txt
The data3 File Contents:
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>
End of File
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5F53 <code>awk</code> \u7A0B\u5E8F\u6253\u5370\u5B8C\u6587\u4EF6\u5185\u5BB9\u540E\uFF0C\u624D\u4F1A\u6267\u884C END \u4E2D\u7684\u811A\u672C\u547D\u4EE4\u3002</p><p>\u4E0A\u9762\u4ECB\u7ECD\u4E86 awk \u7A0B\u5E8F\u7684\u57FA\u672C\u7528\u6CD5\uFF0C\u4E0B\u9762\u7EE7\u7EED\u4ECB\u7ECD\u66F4\u9AD8\u7EA7\u7684\u7528\u6CD5\u3002</p><h3 id="awk-\u9AD8\u7EA7\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#awk-\u9AD8\u7EA7\u7528\u6CD5" aria-hidden="true">#</a> awk \u9AD8\u7EA7\u7528\u6CD5</h3><p>\u5176\u5B9E\u5728 <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\uFF0C\u8FD8\u652F\u6301\u4F7F\u7528\u4E00\u4E9B\u7F16\u7A0B\u8BED\u8A00\uFF0C\u6BD4\u5982\u53D8\u91CF\u3001\u6570\u7EC4\u3001\u5206\u652F\u7ED3\u6784\uFF08if-then-else\uFF09\u3001\u5FAA\u73AF\u7ED3\u6784\uFF08while\uFF09\u3001\u51FD\u6570\u7B49\uFF0C\u4E0B\u9762\u4E00\u4E00\u7ED9\u5927\u5BB6\u4ECB\u7ECD\u3002</p><h4 id="awk-\u4F7F\u7528\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#awk-\u4F7F\u7528\u53D8\u91CF" aria-hidden="true">#</a> awk \u4F7F\u7528\u53D8\u91CF</h4><p>\u5728 <code>awk</code> \u7684\u811A\u672C\u7A0B\u5E8F\u4E2D\uFF0C\u652F\u6301\u4F7F\u7528\u53D8\u91CF\u6765\u5B58\u53D6\u503C\u3002<code>awk</code> \u652F\u6301\u4E24\u79CD\u4E0D\u540C\u7C7B\u578B\u7684\u53D8\u91CF\uFF1A</p><ul><li>\u5185\u5EFA\u53D8\u91CF\uFF1A<code>awk</code> \u672C\u8EAB\u5C31\u521B\u5EFA\u597D\uFF0C\u7528\u6237\u53EF\u4EE5\u76F4\u63A5\u62FF\u6765\u7528\u7684\u53D8\u91CF\uFF0C\u8FD9\u4E9B\u53D8\u91CF\u7528\u6765\u5B58\u653E\u5904\u7406\u6570\u636E\u6587\u4EF6\u4E2D\u7684\u67D0\u4E9B\u5B57\u6BB5\u548C\u8BB0\u5F55\u7684\u4FE1\u606F\u3002</li><li>\u81EA\u5B9A\u4E49\u53D8\u91CF\uFF1A<code>awk</code> \u652F\u6301\u7528\u6237\u81EA\u5DF1\u521B\u5EFA\u53D8\u91CF\u3002</li></ul><h4 id="\u5185\u5EFA\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5185\u5EFA\u53D8\u91CF" aria-hidden="true">#</a> \u5185\u5EFA\u53D8\u91CF</h4>`,208),c=n("p",null,[n("code",null,"awk"),s(" \u7A0B\u5E8F\u4F7F\u7528\u5185\u5EFA\u53D8\u91CF\u6765\u5F15\u7528\u7A0B\u5E8F\u6570\u636E\u91CC\u7684\u4E00\u4E9B\u7279\u6B8A\u529F\u80FD\u3002\u5E38\u89C1\u7684\u4E00\u4E9B\u5185\u5EFA\u53D8\u91CF\uFF0C\u5305\u62EC\u4E0A\u9762\u4ECB\u7ECD\u7684\u6570\u636E\u5B57\u6BB5\u53D8\u91CF\uFF08$0\u3001$1\u3001"),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mn",null,"2...")]),n("annotation",{encoding:"application/x-tex"},"2...")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6444em"}}),n("span",{class:"mord"},"2...")])])]),s("n\uFF09\u4EE5\u53CA\u88682\u3001\u88683 \u4E2D\u6240\u793A\u7684\u8FD9\u4E9B\u53D8\u91CF\u3002")],-1),i=a(`<p><strong>\u88682 <u>\u5B57\u6BB5\u548C\u8BB0\u5F55\u5206\u9694\u7B26\u53D8\u91CF</u></strong></p><table><thead><tr><th>\u53D8\u91CF</th><th>\u529F\u80FD</th></tr></thead><tbody><tr><td>FIELDWIDTHS</td><td>\u7531\u7A7A\u683C\u5206\u9694\u7684\u4E00\u5217\u6570\u5B57\uFF0C\u5B9A\u4E49\u4E86\u6BCF\u4E2A\u6570\u636E\u5B57\u6BB5\u7684\u786E\u5207\u5BBD\u5EA6\u3002</td></tr><tr><td>FNR</td><td>\u5F53\u524D\u8F93\u5165\u6587\u6863\u7684\u8BB0\u5F55\u7F16\u53F7\uFF0C\u5E38\u5728\u6709\u591A\u4E2A\u8F93\u5165\u6587\u6863\u65F6\u4F7F\u7528\u3002</td></tr><tr><td>NR</td><td>\u8F93\u5165\u6D41\u7684\u5F53\u524D\u8BB0\u5F55\u7F16\u53F7\u3002</td></tr><tr><td>FS</td><td>\u8F93\u5165\u5B57\u6BB5\u5206\u9694\u7B26\uFF0C\u9ED8\u8BA4\u4E3A\u7A7A\u683C\u3002</td></tr><tr><td>RS</td><td>\u8F93\u5165\u8BB0\u5F55\u5206\u9694\u7B26\uFF0C\u9ED8\u8BA4\u4E3A\u6362\u884C\u7B26 \\n\u3002</td></tr><tr><td>OFS</td><td>\u8F93\u51FA\u5B57\u6BB5\u5206\u9694\u7B26\uFF0C\u9ED8\u8BA4\u4E3A\u7A7A\u683C\u3002</td></tr><tr><td>ORS</td><td>\u8F93\u51FA\u8BB0\u5F55\u5206\u9694\u7B26\uFF0C\u9ED8\u8BA4\u4E3A\u6362\u884C\u7B26 \\n\u3002</td></tr></tbody></table><p>\u5728\u88682 \u4E2D\uFF0C\u53D8\u91CF FS \u548C OFS \u5B9A\u4E49\u4E86 <code>awk</code> \u5982\u4F55\u5904\u7406\u6570\u636E\u6D41\u4E2D\u7684\u6570\u636E\u5B57\u6BB5\u3002\u6211\u4EEC\u5DF2\u7ECF\u77E5\u9053\u4E86\u5982\u4F55\u4F7F\u7528\u53D8\u91CF FS \u6765\u5B9A\u4E49\u8BB0\u5F55\u4E2D\u7684\u5B57\u6BB5\u5206\u9694\u7B26\uFF0C\u53D8\u91CF OFS \u5177\u5907\u76F8\u540C\u7684\u529F\u80FD\uFF0C\u53EA\u4E0D\u8FC7\u662F\u7528\u5728 print \u547D\u4EE4\u7684\u8F93\u51FA\u4E0A\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data1</span>
data11,data12,data13,data14,data15
data21,data22,data23,data24,data25
data31,data32,data33,data34,data35
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{FS=&quot;,&quot;; OFS=&quot;-&quot;} {print $1,$2,$3}&#39; data1</span>
data11-data12-data13
data21-data22-data23
data31-data32-data33
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{FS=&quot;,&quot;; OFS=&quot;--&quot;} {print $1,$2,$3}&#39; data1</span>
data11--data12--data13
data21--data22--data23
data31--data32--data33
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0Cprint \u547D\u4EE4\u4F1A\u81EA\u52A8\u5C06 OFS \u53D8\u91CF\u7684\u503C\u653E\u7F6E\u5728\u8F93\u51FA\u4E2D\u7684\u6BCF\u4E2A\u5B57\u6BB5\u95F4\u3002\u901A\u8FC7\u8BBE\u7F6E OFS \u53D8\u91CF\uFF0C\u53EF\u4EE5\u5728\u8F93\u51FA\u4E2D\u4F7F\u7528\u4EFB\u610F\u5B57\u7B26\u4E32\u6765\u5206\u9694\u5B57\u6BB5\u3002</p><p>FIELDWIDTHS \u53D8\u91CF\u5141\u8BB8\u7528\u6237\u4E0D\u4F9D\u9760\u5B57\u6BB5\u5206\u9694\u7B26\u6765\u8BFB\u53D6\u8BB0\u5F55\u3002\u5728\u4E00\u4E9B\u5E94\u7528\u7A0B\u5E8F\u4E2D\uFF0C\u6570\u636E\u5E76\u6CA1\u6709\u4F7F\u7528\u5B57\u6BB5\u5206\u9694\u7B26\uFF0C\u800C\u662F\u88AB\u653E\u7F6E\u5728\u4E86\u8BB0\u5F55\u4E2D\u7684\u7279\u5B9A\u5217\uFF0C\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5FC5\u987B\u8BBE\u5B9A FIELDWIDTHS \u53D8\u91CF\u6765\u5339\u914D\u6570\u636E\u5728\u8BB0\u5F55\u4E2D\u7684\u4F4D\u7F6E\u3002</p><p>\u4E00\u65E6\u8BBE\u7F6E\u4E86 FIELDWIDTH \u53D8\u91CF\uFF0C<code>awk</code> \u5C31\u4F1A\u5FFD\u7565 FS \u53D8\u91CF\uFF0C\u5E76\u6839\u636E\u63D0\u4F9B\u7684\u5B57\u6BB5\u5BBD\u5EA6\u6765\u8BA1\u7B97\u5B57\u6BB5\uFF0C\u4E0B\u9762\u662F\u4E2A\u91C7\u7528\u5B57\u6BB5\u5BBD\u5EA6\u800C\u975E\u5B57\u6BB5\u5206\u9694\u7B26\u7684\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data2</span>
<span class="token number">1005.3247596</span>.37
<span class="token number">115</span>-2.349194.00
05810.1298100.1
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{FIELDWIDTHS=&quot;3 5 2 5&quot;}{print $1,$2,$3,$4}&#39; data2</span>
<span class="token number">100</span> <span class="token number">5.324</span> <span class="token number">75</span> <span class="token number">96.37</span>
<span class="token number">115</span> -2.34 <span class="token number">91</span> <span class="token number">94.00</span>
058 <span class="token number">10.12</span> <span class="token number">98</span> <span class="token number">100.1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u6CE8\u610F\uFF0C\u4E00\u65E6\u8BBE\u5B9A\u4E86 FIELDWIDTHS \u53D8\u91CF\u7684\u503C\uFF0C\u5C31\u4E0D\u80FD\u518D\u6539\u53D8\u4E86\uFF0C\u56E0\u6B64\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u5E76\u4E0D\u9002\u7528\u4E8E\u53D8\u957F\u7684\u5B57\u6BB5\u3002</p><p>\u53D8\u91CF RS \u548C ORS \u5B9A\u4E49\u4E86 <code>awk</code> \u7A0B\u5E8F\u5982\u4F55\u5904\u7406\u6570\u636E\u6D41\u4E2D\u7684\u5B57\u6BB5\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cawk \u5C06 RS \u548C ORS \u8BBE\u4E3A\u6362\u884C\u7B26\u3002\u9ED8\u8BA4\u7684 RS \u503C\u8868\u660E\uFF0C\u8F93\u5165\u6570\u636E\u6D41\u4E2D\u7684\u6BCF\u884C\u65B0\u6587\u672C\u5C31\u662F\u4E00\u6761\u65B0\u7EAA\u5F55\u3002 \u6709\u65F6\uFF0C\u4F60\u4F1A\u5728\u6570\u636E\u6D41\u4E2D\u78B0\u5230\u5360\u636E\u591A\u884C\u7684\u5B57\u6BB5\u3002\u5178\u578B\u7684\u4F8B\u5B50\u662F\u5305\u542B\u5730\u5740\u548C\u7535\u8BDD\u53F7\u7801\u7684\u6570\u636E\uFF0C\u5176\u4E2D\u5730\u5740\u548C\u7535\u8BDD\u53F7\u7801\u5404\u5360\u4E00\u884C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Riley Mullen
123 Main Street
Chicago, IL 60601
(312)555-1234
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5982\u679C\u4F60\u7528\u9ED8\u8BA4\u7684 FS \u548C RS \u53D8\u91CF\u503C\u6765\u8BFB\u53D6\u8FD9\u7EC4\u6570\u636E\uFF0C<code>awk</code> \u5C31\u4F1A\u628A\u6BCF\u884C\u4F5C\u4E3A\u4E00\u6761\u5355\u72EC\u7684\u8BB0\u5F55\u6765\u8BFB\u53D6\uFF0C\u5E76\u5C06\u8BB0\u5F55\u4E2D\u7684\u7A7A\u683C\u5F53\u4F5C\u5B57\u6BB5\u5206\u9694\u7B26\uFF0C\u8FD9\u5E76\u4E0D\u662F\u7528\u6237\u60F3\u8981\u7684\u3002</p><p>\u8981\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u53EA\u9700\u628A FS \u53D8\u91CF\u8BBE\u7F6E\u6210\u6362\u884C\u7B26\uFF0C\u8FD9\u5C31\u8868\u660E\u6570\u636E\u6D41\u4E2D\u7684\u6BCF\u884C\u90FD\u662F\u4E00\u4E2A\u5355\u72EC\u7684\u5B57\u6BB5\uFF0C\u6BCF\u884C\u4E0A\u7684\u6240\u6709\u6570\u636E\u90FD\u5C5E\u4E8E\u540C\u4E00\u4E2A\u5B57\u6BB5\uFF1B\u4E0E\u6B64\u540C\u65F6\uFF0C\u628A RS \u53D8\u91CF\u8BBE\u7F6E\u6210\u7A7A\u5B57\u7B26\u4E32\uFF0C\u7136\u540E\u5728\u6570\u636E\u8BB0\u5F55\u95F4\u7559\u4E00\u4E2A\u7A7A\u767D\u884C\uFF0C<code>awk</code> \u4F1A\u628A\u6BCF\u4E2A\u7A7A\u767D\u884C\u5F53\u4F5C\u4E00\u4E2A\u8BB0\u5F55\u5206\u9694\u7B26\u3002\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data3</span>
Riley Mullen
<span class="token number">123</span> Main Street
Chicago, IL <span class="token number">60601</span>
<span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234

Frank Williams
<span class="token number">456</span> Oak Street
Indianapolis, IN <span class="token number">46201</span>
<span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876

Haley Snell
<span class="token number">4231</span> Elm Street
Detroit, MI <span class="token number">48201</span>
<span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{FS=&quot;\\n&quot;; RS=&quot;&quot;} {print $1,$4}&#39; data3</span>
Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">\u4E86\u89E3</p><p><strong>\u88683 <u>\u73AF\u5883\u4FE1\u606F\u53D8\u91CF</u></strong></p><table><thead><tr><th>\u53D8\u91CF\u540D</th><th>\u529F\u80FD</th></tr></thead><tbody><tr><td>ARGC</td><td>\u547D\u4EE4\u884C\u53C2\u6570\u4E2A\u6570\u3002</td></tr><tr><td>ARGIND</td><td>\u5F53\u524D\u6587\u4EF6\u5728 ARGC \u4E2D\u7684\u4F4D\u7F6E\u3002</td></tr><tr><td>ARGV</td><td>\u5305\u542B\u547D\u4EE4\u884C\u53C2\u6570\u7684\u6570\u7EC4\u3002</td></tr><tr><td>CONVFMT</td><td>\u6570\u5B57\u7684\u8F6C\u6362\u683C\u5F0F\uFF0C\u9ED8\u8BA4\u503C\u4E3A %.6g\u3002</td></tr><tr><td>ENVIRON</td><td>\u5F53\u524D shell \u73AF\u5883\u53D8\u91CF\u53CA\u5176\u503C\u7EC4\u6210\u7684\u5173\u8054\u6570\u7EC4\u3002</td></tr><tr><td>ERRNO</td><td>\u5F53\u8BFB\u53D6\u6216\u5173\u95ED\u8F93\u5165\u6587\u4EF6\u53D1\u751F\u9519\u8BEF\u65F6\u7684\u7CFB\u7EDF\u9519\u8BEF\u53F7\u3002</td></tr><tr><td>FILENAME</td><td>\u5F53\u524D\u8F93\u5165\u6587\u6863\u7684\u540D\u79F0\u3002</td></tr><tr><td>FNR</td><td>\u5F53\u524D\u6570\u636E\u6587\u4EF6\u4E2D\u7684\u6570\u636E\u884C\u6570\u3002</td></tr><tr><td>IGNORECASE</td><td>\u8BBE\u6210\u975E 0 \u503C\u65F6\uFF0C\u5FFD\u7565 awk \u547D\u4EE4\u4E2D\u51FA\u73B0\u7684\u5B57\u7B26\u4E32\u7684\u5B57\u7B26\u5927\u5C0F\u5199\u3002</td></tr><tr><td>NF</td><td>\u6570\u636E\u6587\u4EF6\u4E2D\u7684\u5B57\u6BB5\u603B\u6570\u3002</td></tr><tr><td>NR</td><td>\u5DF2\u5904\u7406\u7684\u8F93\u5165\u8BB0\u5F55\u6570\u3002</td></tr><tr><td>OFMT</td><td>\u6570\u5B57\u7684\u8F93\u51FA\u683C\u5F0F\uFF0C\u9ED8\u8BA4\u503C\u4E3A %.6g\u3002</td></tr><tr><td>RLENGTH</td><td>\u7531 match \u51FD\u6570\u6240\u5339\u914D\u7684\u5B50\u5B57\u7B26\u4E32\u7684\u957F\u5EA6\u3002</td></tr><tr><td>TSTART</td><td>\u7531 match \u51FD\u6570\u6240\u5339\u914D\u7684\u5B50\u5B57\u7B26\u4E32\u7684\u8D77\u59CB\u4F4D\u7F6E\u3002</td></tr></tbody></table><p>\u5176\u4E2D\uFF0CFNR \u548C NR \u53D8\u91CF\u867D\u7136\u7C7B\u4F3C\uFF0C\u4F46\u53C8\u7565\u6709\u4E0D\u540C\u3002FNR \u53D8\u91CF\u542B\u6709\u5F53\u524D\u6570\u636E\u6587\u4EF6\u4E2D\u5DF2\u5904\u7406\u8FC7\u7684\u8BB0\u5F55\u6570\uFF0CNR \u53D8\u91CF\u5219\u542B\u6709\u5DF2\u5904\u7406\u8FC7\u7684\u8BB0\u5F55\u603B\u6570\u3002\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data1</span>
data11,data12,data13,data14,data15
data21,data22,data23,data24,data25
data31,data32,data33,data34,data35
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;</span>
<span class="token operator">&gt;</span> BEGIN <span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>print <span class="token variable">$1</span>,<span class="token string">&quot;FNR=&quot;</span>FNR,<span class="token string">&quot;NR=&quot;</span>NR<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> END<span class="token punctuation">{</span>print <span class="token string">&quot;There were&quot;</span>,NR,<span class="token string">&quot;records processed&quot;</span><span class="token punctuation">}</span>&#39; data1 data1
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">1</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">2</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">3</span>
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">4</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">5</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">6</span>
There were <span class="token number">6</span> records processed
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u7531\u6B64\u53EF\u4EE5\u770B\u51FA\uFF0C\u5F53\u53EA\u4F7F\u7528\u4E00\u4E2A\u6570\u636E\u6587\u4EF6\u4F5C\u4E3A\u8F93\u5165\u65F6\uFF0CFNR \u548C NR \u7684\u503C\u662F\u76F8\u540C\u7684\uFF1B\u5982\u679C\u4F7F\u7528\u591A\u4E2A\u6570\u636E\u6587\u4EF6\u4F5C\u4E3A\u8F93\u5165\uFF0CFNR \u7684\u503C\u4F1A\u5728\u5904\u7406\u6BCF\u4E2A\u6570\u636E\u6587\u4EF6\u65F6\u88AB\u91CD\u7F6E\uFF0C\u800C NR \u7684\u503C\u5219\u4F1A\u7EE7\u7EED\u8BA1\u6570\u76F4\u5230\u5904\u7406\u5B8C\u6240\u6709\u7684\u6570\u636E\u6587\u4EF6\u3002</p></div><h4 id="\u81EA\u5B9A\u4E49\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u53D8\u91CF" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u53D8\u91CF</h4><p>\u548C\u5176\u4ED6\u5178\u578B\u7684\u7F16\u7A0B\u8BED\u8A00\u4E00\u6837\uFF0C<code>awk</code> \u5141\u8BB8\u7528\u6237\u5B9A\u4E49\u81EA\u5DF1\u7684\u53D8\u91CF\u5728\u811A\u672C\u7A0B\u5E8F\u4E2D\u4F7F\u7528\u3002<code>awk</code> \u81EA\u5B9A\u4E49\u53D8\u91CF\u540D\u53EF\u4EE5\u662F\u4EFB\u610F\u6570\u76EE\u7684\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\uFF0C\u4F46\u4E0D\u80FD\u4EE5\u6570\u5B57\u5F00\u5934\u3002\u66F4\u91CD\u8981\u7684\u662F\uFF0C<code>awk</code> \u53D8\u91CF\u540D\u533A\u5206\u5927\u5C0F\u5199\u3002</p><p>\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;</span>
<span class="token operator">&gt;</span> BEGIN<span class="token punctuation">{</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">testing</span><span class="token operator">=</span><span class="token string">&quot;This is a test&quot;</span>
<span class="token operator">&gt;</span> print testing
<span class="token operator">&gt;</span> <span class="token assign-left variable">testing</span><span class="token operator">=</span><span class="token number">45</span>
<span class="token operator">&gt;</span> print testing
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39;
This is a <span class="token builtin class-name">test</span>
<span class="token number">45</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0Cprint \u8BED\u53E5\u7684\u8F93\u51FA\u662F testing \u53D8\u91CF\u7684\u5F53\u524D\u503C\u3002</p><p>\u4E5F\u53EF\u4EE5\u7528 <code>awk</code> \u547D\u4EE4\u884C\u6765\u7ED9\u7A0B\u5E8F\u4E2D\u7684\u53D8\u91CF\u8D4B\u503C\uFF0C\u8FD9\u5141\u8BB8\u6211\u4EEC\u5728\u6B63\u5E38\u7684\u4EE3\u7801\u4E4B\u5916\u8D4B\u503C\uFF0C\u5373\u65F6\u6539\u53D8\u53D8\u91CF\u7684\u503C\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat script1</span>
BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>print <span class="token variable">$n</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -f script1 n=2 data1</span>
data12
data22
data32
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -f script1 n=3 data1</span>
data13
data23
data33
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4F7F\u7528\u547D\u4EE4\u884C\u53C2\u6570\u6765\u5B9A\u4E49\u53D8\u91CF\u503C\u4F1A\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u5373\u8BBE\u7F6E\u4E86\u53D8\u91CF\u540E\uFF0C\u8FD9\u4E2A\u503C\u5728\u4EE3\u7801\u7684 BEGIN \u90E8\u5206\u4E0D\u53EF\u7528\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat script2</span>
BEGIN<span class="token punctuation">{</span>print <span class="token string">&quot;The starting value is&quot;</span>,n<span class="token punctuation">;</span> <span class="token assign-left variable">FS</span><span class="token operator">=</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>print <span class="token variable">$n</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -f script2 n=3 data1</span>
The starting value is
data13
data23
data33
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u53EF\u4EE5\u7528 -v \u547D\u4EE4\u884C\u53C2\u6570\uFF0C\u5B83\u53EF\u4EE5\u5B9E\u73B0\u5728 BEGIN \u4EE3\u7801\u4E4B\u524D\u8BBE\u5B9A\u53D8\u91CF\u3002\u5728\u547D\u4EE4\u884C\u4E0A\uFF0C-v \u547D\u4EE4\u884C\u53C2\u6570\u5FC5\u987B\u653E\u5728\u811A\u672C\u4EE3\u7801\u4E4B\u524D\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -v n=3 -f script2 data1</span>
The starting value is <span class="token number">3</span>
data13
data23
data33
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6CE8\u610F\uFF0C<code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\u8F93\u51FA\u51FD\u6570\u8FD8\u53EF\u4EE5\u4F7F\u7528 C \u8BED\u8A00\u4E2D\u7684 printf \u51FD\u6570\u3002</p><h3 id="awk-\u4F7F\u7528\u6570\u7EC4" tabindex="-1"><a class="header-anchor" href="#awk-\u4F7F\u7528\u6570\u7EC4" aria-hidden="true">#</a> awk \u4F7F\u7528\u6570\u7EC4</h3><p>\u4E3A\u4E86\u5728\u5355\u4E2A\u53D8\u91CF\u4E2D\u5B58\u50A8\u591A\u4E2A\u503C\uFF0C\u8BB8\u591A\u7F16\u7A0B\u8BED\u8A00\u90FD\u63D0\u4F9B\u6570\u7EC4\uFF0C<code>awk</code> \u4F7F\u7528\u5173\u8054\u6570\u7EC4\u63D0\u4F9B\u6570\u7EC4\u529F\u80FD\u3002</p><p>\u5173\u8054\u6570\u7EC4\u8DDF\u6570\u5B57\u6570\u7EC4\u4E0D\u540C\u4E4B\u5904\u5728\u4E8E\uFF0C\u5B83\u7684\u7D22\u5F15\u503C\u53EF\u4EE5\u662F\u4EFB\u610F\u6587\u672C\u5B57\u7B26\u4E32\u3002\u7528\u6237\u4E0D\u9700\u8981\u7528\u8FDE\u7EED\u7684\u6570\u5B57\u6765\u6807\u8BC6\u6570\u7EC4\u4E2D\u7684\u6570\u636E\u5143\u7D20\uFF1B\u76F8\u53CD\uFF0C\u5173\u8054\u6570\u7EC4\u7528\u5404\u79CD\u5B57\u7B26\u4E32\u6765\u5F15\u7528\u503C\u3002\u6BCF\u4E2A\u7D22\u5F15\u5B57\u7B26\u4E32\u90FD\u5FC5\u987B\u80FD\u591F\u552F\u4E00\u5730\u6807\u8BC6\u51FA\u8D4B\u7ED9\u5B83\u7684\u6570\u636E\u5143\u7D20\u3002</p><p>\u5982\u679C\u4F60\u719F\u6089\u5176\u4ED6\u7F16\u7A0B\u8BED\u8A00\u7684\u8BDD\uFF0C\u5176\u5B9E\u5173\u8054\u6570\u7EC4\u548C\u6563\u5217\u8868\u3001\u5B57\u5178\u7684\u7528\u6CD5\u7C7B\u4F3C\u3002</p><h4 id="\u5173\u8054\u6570\u7EC4\u7684\u5B9A\u4E49\u548C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5173\u8054\u6570\u7EC4\u7684\u5B9A\u4E49\u548C\u4F7F\u7528" aria-hidden="true">#</a> \u5173\u8054\u6570\u7EC4\u7684\u5B9A\u4E49\u548C\u4F7F\u7528</h4><p>\u5728 <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u6570\u7EC4\u53D8\u91CF\u53EF\u4EE5\u4F7F\u7528\u6807\u51C6\u590D\u5236\u8BED\u53E5\uFF0C\u5176\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>var<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">=</span>element
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5176\u4E2D\uFF0Cvar \u662F\u6570\u7EC4\u540D\uFF0Cindex \u662F\u5173\u8054\u6570\u7EC4\u7684\u7D22\u5F15\u503C\uFF0Celement \u662F\u6570\u636E\u5143\u7D20\u503C\u3002\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>capital<span class="token punctuation">[</span><span class="token string">&quot;Illinois&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;[Spring](http://c.biancheng.net/spring/)field&quot;</span>
capital<span class="token punctuation">[</span><span class="token string">&quot;Indiana&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Indianapolis&quot;</span>
capital<span class="token punctuation">[</span><span class="token string">&quot;Ohio&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Columbus&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5728\u5F15\u7528\u6570\u7EC4\u53D8\u91CF\u65F6\uFF0C\u5FC5\u987B\u7528\u7D22\u5F15\u503C\uFF08index\uFF09\u6765\u63D0\u53D6\u76F8\u5E94\u7684\u6570\u636E\u5143\u7D20\u503C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{</span>
<span class="token operator">&gt;</span> capital<span class="token punctuation">[</span><span class="token string">&quot;Illinois&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Springfield&quot;</span>
<span class="token operator">&gt;</span> print capital<span class="token punctuation">[</span><span class="token string">&quot;Illinois&quot;</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39;
Springfield
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6570\u7EC4\u53D8\u91CF\u4E5F\u662F\u53D8\u91CF\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u8FDB\u884C\u57FA\u672C\u7684\u7B97\u672F\u8FD0\u7B97\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> total <span class="token operator">=</span> var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> + var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span> print total
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39;
<span class="token number">37</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="\u5173\u8054\u6570\u7EC4\u7684\u904D\u5386" tabindex="-1"><a class="header-anchor" href="#\u5173\u8054\u6570\u7EC4\u7684\u904D\u5386" aria-hidden="true">#</a> \u5173\u8054\u6570\u7EC4\u7684\u904D\u5386</h4><p>\u5728 <code>awk</code> \u4E2D\u904D\u5386\u5173\u8054\u6570\u7EC4\uFF0C\u53EF\u4EE5\u7528 for \u8BED\u53E5\u7684\u4E00\u79CD\u7279\u6B8A\u5F62\u5F0F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>var <span class="token keyword">in</span> array<span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
	statements
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD9\u4E2A for \u8BED\u53E5\u4F1A\u5728\u6BCF\u6B21\u5FAA\u73AF\u65F6\u5C06\u5173\u8054\u6570\u7EC4 array \u7684\u4E0B\u4E00\u4E2A\u7D22\u5F15\u503C\u8D4B\u7ED9\u53D8\u91CF var\uFF0C\u7136\u540E\u6267\u884C\u4E00\u904D statements\u3002</p><p><strong>\u518D\u6B21\u5F3A\u8C03\uFF0C\u6574\u4E2A\u904D\u5386\u8FC7\u7A0B\u4E2D\uFF0C\u4F20\u7ED9 var \u7684\u90FD\u662F\u6BCF\u4E2A\u6570\u7EC4\u5143\u7D20\u7684\u7D22\u5F15\u503C\uFF08\u4E5F\u5C31\u662F index\uFF09\uFF0C\u4E0D\u662F\u6570\u7EC4\u5143\u7D20\u7684\u503C\u3002</strong></p><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;m&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;u&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>test <span class="token keyword">in</span> var<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>  print <span class="token string">&quot;Index:&quot;</span>,test,<span class="token string">&quot; - Value:&quot;</span>,var<span class="token punctuation">[</span>test<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39;
Index: u - Value: <span class="token number">4</span>
Index: m - Value: <span class="token number">3</span>
Index: a - Value: <span class="token number">1</span>
Index: g - Value: <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u6CE8\u610F\uFF0C\u7D22\u5F15\u503C\u4E0D\u4F1A\u6309\u4EFB\u4F55\u7279\u5B9A\u987A\u5E8F\u8FD4\u56DE\uFF0C\u4F46\u5B83\u4EEC\u90FD\u80FD\u591F\u6307\u5411\u5BF9\u5E94\u7684\u6570\u636E\u5143\u7D20\u503C\u3002</p><h4 id="\u5220\u9664\u6570\u7EC4\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u6570\u7EC4\u53D8\u91CF" aria-hidden="true">#</a> \u5220\u9664\u6570\u7EC4\u53D8\u91CF</h4><p><code>awk</code> \u811A\u672C\u7A0B\u5E8F\u8FD8\u652F\u6301\u4ECE\u5173\u8054\u6570\u7EC4\u4E2D\u5220\u9664\u67D0\u4E2A\u6570\u7EC4\u7D22\u5F15\uFF0C\u4F7F\u7528 delete \u547D\u4EE4\u5C31\u53EF\u4EE5\uFF0C\u6B64\u547D\u4EE4\u4F1A\u4ECE\u6570\u7EC4\u4E2D\u5220\u9664\u6307\u5B9A\u7684\u7D22\u5F15\u503C\u53CA\u76F8\u5173\u7684\u6570\u636E\u5143\u7D20\u7684\u503C\u3002</p><p>delete \u547D\u4EE4\u7684\u57FA\u672C\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>delete array<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;BEGIN{</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> var<span class="token punctuation">[</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>test <span class="token keyword">in</span> var<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>  print <span class="token string">&quot;Index:&quot;</span>,test,<span class="token string">&quot; - Value:&quot;</span>,var<span class="token punctuation">[</span>test<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> delete var<span class="token punctuation">[</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">]</span>
<span class="token operator">&gt;</span> print <span class="token string">&quot;---&quot;</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>test <span class="token keyword">in</span> var<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>  print <span class="token string">&quot;Index:&quot;</span>,test,<span class="token string">&quot; - Value:&quot;</span>,var<span class="token punctuation">[</span>test<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39;
Index: a - Value: <span class="token number">1</span>
Index: g - Value: <span class="token number">2</span>
---
Index: a - Value: <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4E00\u65E6\u4ECE\u5173\u8054\u6570\u7EC4\u4E2D\u5220\u9664\u4E86\u7D22\u5F15\u503C\uFF0C\u5C31\u6CA1\u6CD5\u518D\u7528\u5B83\u6765\u63D0\u53D6\u5143\u7D20\u503C\u3002</p><h3 id="awk-\u4F7F\u7528\u5206\u652F\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#awk-\u4F7F\u7528\u5206\u652F\u7ED3\u6784" aria-hidden="true">#</a> awk \u4F7F\u7528\u5206\u652F\u7ED3\u6784</h3><p><code>awk</code> \u652F\u6301\u6807\u51C6\u7684 if-then-else \u683C\u5F0F\u7684 if \u8BED\u53E5\uFF0C\u5176\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span>
	commands1\uFF1B
 <span class="token keyword">else</span>
	commands2\uFF1B
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u5C06\u5B83\u653E\u5728\u4E00\u884C\u4E0A\uFF0C\u50CF\u8FD9\u6837\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> statement1<span class="token punctuation">;</span><span class="token keyword">else</span> statement2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data4</span>
<span class="token number">10</span>
<span class="token number">5</span>
<span class="token number">13</span>
<span class="token number">50</span>
<span class="token number">34</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{if ($1 &gt; 20) print $1 * 2; else print $1 / 2}&#39; data4</span>
<span class="token number">5</span>
<span class="token number">2.5</span>
<span class="token number">6.5</span>
<span class="token number">100</span>
<span class="token number">68</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="awk-\u4F7F\u7528\u5FAA\u73AF\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#awk-\u4F7F\u7528\u5FAA\u73AF\u7ED3\u6784" aria-hidden="true">#</a> awk \u4F7F\u7528\u5FAA\u73AF\u7ED3\u6784</h3><p><code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528 while\u3001do-while\u3001for \u8FD9 3 \u79CD\u5FAA\u73AF\u7ED3\u6784\uFF0C\u5B83\u4EEC\u5404\u81EA\u7684\u57FA\u672C\u683C\u5F0F\u5206\u522B\u5982\u8868 3 \u6240\u793A\u3002</p><h4 id="while-\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#while-\u5FAA\u73AF" aria-hidden="true">#</a> while \u5FAA\u73AF</h4><p>\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
	commands<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat data5</span>
<span class="token number">130</span> <span class="token number">120</span> <span class="token number">135</span>
<span class="token number">160</span> <span class="token number">113</span> <span class="token number">140</span>
<span class="token number">145</span> <span class="token number">170</span> <span class="token number">215</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> total <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>    total <span class="token operator">+=</span> <span class="token variable">$i</span>
<span class="token operator">&gt;</span>    i++
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> avg <span class="token operator">=</span> total / <span class="token number">3</span>
<span class="token operator">&gt;</span> print <span class="token string">&quot;Average:&quot;</span>,avg
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39; data5
Average: <span class="token number">128.333</span>
Average: <span class="token number">137.667</span>
Average: <span class="token number">176.667</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="do-while-\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#do-while-\u5FAA\u73AF" aria-hidden="true">#</a> do-while \u5FAA\u73AF</h4><p>\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">do</span> <span class="token punctuation">{</span>
	commmands<span class="token punctuation">;</span>
<span class="token punctuation">}</span>while <span class="token punctuation">(</span>\u6761\u4EF6<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> total <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token keyword">do</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>    total <span class="token operator">+=</span> <span class="token variable">$i</span>
<span class="token operator">&gt;</span>    i++
<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>total <span class="token operator">&lt;</span> <span class="token number">150</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> print total <span class="token punctuation">}</span>&#39; data5
<span class="token number">250</span>
<span class="token number">160</span>
<span class="token number">315</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="for-\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#for-\u5FAA\u73AF" aria-hidden="true">#</a> for \u5FAA\u73AF</h4><p>\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>for<span class="token punctuation">(</span>i<span class="token punctuation">;</span>condition<span class="token punctuation">;</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	commands<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> total <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i++<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span>    total <span class="token operator">+=</span> <span class="token variable">$i</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> avg <span class="token operator">=</span> total / <span class="token number">3</span>
<span class="token operator">&gt;</span> print <span class="token string">&quot;Average:&quot;</span>,avg
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39; data5
Average: <span class="token number">128.333</span>
Average: <span class="token number">137.667</span>
Average: <span class="token number">176.667</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u53EF\u4EE5\u770B\u51FA\uFF0C<code>awk</code> \u652F\u6301\u4F7F\u7528\u7684\u5FAA\u73AF\u7ED3\u6784\u7684\u7528\u6CD5\u548C C \u8BED\u8A00\u5B8C\u5168\u4E00\u6837\uFF0C\u9664\u6B64\u4E4B\u5916\uFF0C<code>awk</code> \u8FD8\u652F\u6301\u4F7F\u7528 break\uFF08\u8DF3\u51FA\u5FAA\u73AF\uFF09\u3001continue\uFF08\u7EC8\u6B62\u5F53\u524D\u5FAA\u73AF\uFF09\u5173\u952E\u5B57\uFF0C\u5176\u7528\u6CD5\u548C C \u8BED\u8A00\u4E2D\u4E5F\u5B8C\u5168\u76F8\u540C\u3002</p><h3 id="awk-\u5FAA\u73AF\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#awk-\u5FAA\u73AF\u63A7\u5236" aria-hidden="true">#</a> awk \u5FAA\u73AF\u63A7\u5236</h3><h4 id="break-\u8DF3\u51FA\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#break-\u8DF3\u51FA\u5FAA\u73AF" aria-hidden="true">#</a> break\uFF1A\u8DF3\u51FA\u5FAA\u73AF</h4><p>\u8DF3\u51FA\u5FAA\u73AF\uFF0C\u7EE7\u7EED\u6267\u884C\u5FAA\u73AF\u5916\u7684\u540E\u7EED\u8BED\u53E5</p><p>\u4F8B\uFF1A\u7D2F\u52A0\u6BCF\u884C\u6570\u503C\uFF0C\u548C\u5927\u4E8E150\u505C\u6B62\u7D2F\u52A0</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux ~ <span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token operator">&gt;</span>	<span class="token assign-left variable">sum</span><span class="token operator">+=</span><span class="token variable">$i</span>
<span class="token operator">&gt;</span>	<span class="token keyword">if</span> <span class="token punctuation">(</span>sum<span class="token operator">&gt;</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token operator">&gt;</span>		<span class="token builtin class-name">break</span>
<span class="token operator">&gt;</span>	<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>	i++
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> print <span class="token function">sum</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>&#39; data5
<span class="token number">250</span>
<span class="token number">160</span>
<span class="token number">315</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="continue-\u7EC8\u6B62\u672C\u6B21\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#continue-\u7EC8\u6B62\u672C\u6B21\u5FAA\u73AF" aria-hidden="true">#</a> continue\uFF1A\u7EC8\u6B62\u672C\u6B21\u5FAA\u73AF</h4><p>\u7EC8\u6B62\u672C\u6B21\u5FAA\u73AF</p><p>\u4F8B\uFF1A\u7D2F\u52A0\u6BCF\u884C\u6570\u503C\uFF0C\u548C\u5927\u4E8E 400 \u7684\u6253\u5370\u51FA\u6765\uFF0C\u5C0F\u4E8E\u7B49\u4E8E 400 \u7684\u5219\u9000\u51FA\u8BE5\u6B21\u5FAA\u73AF\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@linux ~ <span class="token punctuation">]</span><span class="token comment"># awk &#39;{</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token assign-left variable">sum</span><span class="token operator">+=</span><span class="token variable">$i</span>
	i++
	<span class="token keyword">if</span> <span class="token punctuation">(</span>sum<span class="token operator">&gt;</span><span class="token number">400</span><span class="token punctuation">)</span>
		print <span class="token function">sum</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">continue</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>&#39; data5
<span class="token number">413</span>
<span class="token number">530</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="awk-\u4F7F\u7528\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#awk-\u4F7F\u7528\u51FD\u6570" aria-hidden="true">#</a> awk \u4F7F\u7528\u51FD\u6570</h3><h4 id="\u5185\u5EFA\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u5185\u5EFA\u51FD\u6570" aria-hidden="true">#</a> \u5185\u5EFA\u51FD\u6570</h4><p>\u548C\u5185\u5EFA\u53D8\u91CF\u7C7B\u4F3C\uFF0C<code>awk</code> \u4E5F\u63D0\u4F9B\u4E86\u4E0D\u5C11\u5185\u5EFA\u51FD\u6570\uFF0C\u53EF\u8FDB\u884C\u4E00\u4E9B\u5E38\u89C1\u7684\u6570\u5B66\u3001\u5B57\u7B26\u4E32\u4EE5\u53CA\u65F6\u95F4\u51FD\u6570\u8FD0\u7B97\uFF0C\u5982\u88684 \u6240\u793A\u3002</p><p><strong>\u88684 <u>\u5E38\u89C1\u7684\u5185\u5EFA\u51FD\u6570</u></strong></p><table><tr><td>\u51FD\u6570\u5206\u7C7B</td><td>\u51FD\u6570\u539F\u578B</td><td>\u51FD\u6570\u529F\u80FD </td></tr><tr><td rowspan="9">\u6570\u5B66\u51FD\u6570</td><td>atan2(x,y)</td><td>x/y \u7684\u53CD\u6B63\u5207\uFF0Cx \u548C y \u4EE5\u5F27\u5EA6\u4E3A\u5355\u4F4D\u3002</td></tr><tr><td>cos(x)</td><td>x \u7684\u4F59\u5F26\uFF0Cx \u4EE5\u5F27\u5EA6\u4E3A\u5355\u4F4D\u3002</td></tr><tr><td>exp(x)</td><td>x \u7684\u6307\u6570\u51FD\u6570\u3002</td></tr><tr><td>int(x)</td><td>x \u7684\u6574\u6570\u90E8\u5206\uFF0C\u53D6\u9760\u8FD1\u96F6\u4E00\u4FA7\u7684\u503C\u3002</td></tr><tr><td>log(x)</td><td>x \u7684\u81EA\u7136\u5BF9\u6570\u3002</td></tr><tr><td>srand(x)</td><td>\u4E3A\u8BA1\u7B97\u968F\u673A\u6570\u6307\u5B9A\u4E00\u4E2A\u79CD\u5B50\u503C\u3002</td></tr><tr><td>rand()</td><td>\u6BD4 0 \u5927\u6BD4 1 \u5C0F\u7684\u968F\u673A\u6D6E\u70B9\u503C\u3002</td></tr><tr><td>sin(x)</td><td>x \u7684\u6B63\u5F26\uFF0Cx \u4EE5\u5F27\u5EA6\u4E3A\u5355\u4F4D\u3002</td></tr><tr><td>sqrt(x)</td><td>x \u7684\u5E73\u65B9\u6839\u3002</td></tr><tr><td rowspan="6">\u4F4D\u8FD0\u7B97\u51FD\u6570</td><td>and(v1,v2)</td><td>\u6267\u884C\u503C v1 \u548C v2 \u7684\u6309\u4F4D\u4E0E\u8FD0\u7B97\u3002</td></tr><tr><td>compl(val)</td><td>\u6267\u884C val \u7684\u8865\u8FD0\u7B97\u3002</td></tr><tr><td>lshift(val,count)</td><td>\u5C06\u503C val \u5DE6\u79FB count \u4F4D\u3002</td></tr><tr><td>or(v1,v2) </td><td>\u6267\u884C\u503C v1 \u548C v2 \u7684\u6309\u4F4D\u6216\u8FD0\u7B97\u3002</td></tr><tr><td>rshift(val,count)</td><td>\u5C06\u503C val \u53F3\u79FB count \u4F4D\u3002</td></tr><tr><td>xor(v1,v2)</td><td>\u6267\u884C\u503C v1 \u548C v2 \u7684\u6309\u4F4D\u5F02\u6216\u8FD0\u7B97\u3002</td></tr><tr><td rowspan="13">\u5B57\u7B26\u4E32\u51FD\u6570</td><td> asort(s [,d])</td><td>\u5C06\u6570\u7EC4 s \u6309\u6570\u636E\u5143\u7D20\u503C\u6392\u5E8F\u3002\u7D22\u5F15\u503C\u4F1A\u88AB\u66FF\u6362\u6210\u8868\u793A\u65B0\u7684\u6392\u5E8F\u987A\u5E8F\u7684\u8FDE\u7EED\u6570\u5B57\u3002<br> \u53E6\u5916\uFF0C\u5982\u679C\u6307\u5B9A\u4E86 d\uFF0C\u5219\u6392\u5E8F\u540E\u7684\u6570\u7EC4\u4F1A\u5B58\u50A8\u5728\u6570\u7EC4 d \u4E2D\u3002</td></tr><tr><td>asorti(s [,d])</td><td>\u5C06\u6570\u7EC4 s \u6309\u7D22\u5F15\u503C\u6392\u5E8F\u3002\u751F\u6210\u7684\u6570\u7EC4\u4F1A\u5C06\u7D22\u5F15\u503C\u4F5C\u4E3A\u6570\u636E\u5143\u7D20\u503C\uFF0C\u7528\u8FDE\u7EED\u6570\u5B57\u7D22\u5F15\u6765\u8868\u660E\u6392\u5E8F\u987A\u5E8F\u3002<br> \u53E6\u5916\u5982\u679C\u6307\u5B9A\u4E86 d\uFF0C\u6392\u5E8F\u540E\u7684\u6570\u7EC4\u4F1A\u5B58\u50A8\u5728\u6570\u7EC4 d \u4E2D\u3002</td></tr><tr><td>gensub(r,s,h [,t]</td><td>\u67E5\u627E\u53D8\u91CF $0 \u6216\u76EE\u6807\u5B57\u7B26\u4E32 t\uFF08\u5982\u679C\u63D0\u4F9B\u4E86\u7684\u8BDD\uFF09\u6765\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F r\u3002<br>\u5982\u679C h \u662F\u4E00\u4E2A\u4EE5 g \u6216 G \u5F00\u5934\u7684\u5B57\u7B26\u4E32\uFF0C\u5C31\u7528 s \u66FF\u6362\u6389\u5339\u914D\u7684\u6587\u672C\u3002<br>\u5982\u679C h \u662F\u4E00\u4E2A\u6570\u5B57\uFF0C\u5B83\u8868\u793A\u8981\u66FF\u6362\u6389\u7B2C h \u5904 r \u5339\u914D\u7684\u5730\u65B9\u3002</td></tr><tr><td>gsub(r,s [,t])</td><td>\u67E5\u627E\u53D8\u91CF $0 \u6216\u76EE\u6807\u5B57\u7B26\u4E32 t\uFF08\u5982\u679C\u63D0\u4F9B\u4E86\u7684\u8BDD\uFF09\u6765\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F r\u3002<br>\u5982\u679C\u627E\u5230\u4E86\uFF0C\u5C31\u5168\u90E8\u66FF\u6362\u6210\u5B57\u7B26\u4E32 s\u3002</td></tr><tr><td>index(s,t)</td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32 t \u5728\u5B57\u7B26\u4E32 s \u4E2D\u7684\u7D22\u5F15\u503C\uFF0C\u5982\u679C\u6CA1\u627E\u5230\u7684\u8BDD\u8FD4\u56DE 0\u3002</td></tr><tr><td>length([s])</td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32 s \u7684\u957F\u5EA6\uFF1B\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u7684\u8BDD\uFF0C\u8FD4\u56DE $0 \u7684\u957F\u5EA6\u3002</td></tr><tr><td>match(s,r [,a])</td><td>\u8FD4\u56DE\u5B57\u7B26\u4E32 s \u4E2D\u6B63\u5219\u8868\u8FBE\u5F0F r \u51FA\u73B0\u4F4D\u7F6E\u7684\u7D22\u5F15\u3002<br>\u5982\u679C\u6307\u5B9A\u4E86\u6570\u7EC4 a\uFF0C\u5B83\u4F1A\u5B58\u50A8 s \u4E2D\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u90A3\u90E8\u5206\u3002</td></tr><tr><td>split(s,a [,r])</td><td>\u5C06 s \u7528 FS \u5B57\u7B26\u6216\u6B63\u5219\u8868\u8FBE\u5F0F r\uFF08\u5982\u679C\u6307\u5B9A\u4E86\u7684\u8BDD\uFF09\u5206\u5F00\u653E\u5230\u6570\u7EC4 a \u4E2D\uFF0C\u5E76\u8FD4\u56DE\u5B57\u6BB5\u7684\u603B\u6570\u3002</td></tr><tr><td>sprintf(format,variables)</td><td>\u7528\u63D0\u4F9B\u7684 format \u548C variables \u8FD4\u56DE\u4E00\u4E2A\u7C7B\u4F3C\u4E8E printf \u8F93\u51FA\u7684\u5B57\u7B26\u4E32\u3002</td></tr><tr><td>sub(r,s [,t])</td><td>\u5728\u53D8\u91CF $0 \u6216\u76EE\u6807\u5B57\u7B26\u4E32 t \u4E2D\u67E5\u627E\u6B63\u5219\u8868\u8FBE\u5F0F r \u7684\u5339\u914D\u3002\u5982\u679C\u627E\u5230\u4E86\uFF0C\u5C31\u7528\u5B57\u7B26\u4E32 s \u66FF\u6362\u6389\u7B2C\u4E00\u5904\u5339\u914D\u3002</td></tr><tr><td>substr(s,i [,n])</td><td>\u8FD4\u56DE s \u4E2D\u4ECE\u7D22\u5F15\u503C i \u5F00\u59CB\u7684 n \u4E2A\u5B57\u7B26\u7EC4\u6210\u7684\u5B50\u5B57\u7B26\u4E32\u3002\u5982\u679C\u672A\u63D0\u4F9B n\uFF0C\u5219\u8FD4\u56DE s \u5269\u4E0B\u7684\u90E8\u5206\u3002</td></tr><tr><td>tolower(s)</td><td>\u5C06 s \u4E2D\u7684\u6240\u6709\u5B57\u7B26\u8F6C\u6362\u6210\u5C0F\u5199\u3002</td></tr><tr><td>toupper(s)</td><td>\u5C06 s \u4E2D\u7684\u6240\u6709\u5B57\u7B26\u8F6C\u6362\u6210\u5927\u5199\u3002</td></tr><tr><td rowspan="3">\u65F6\u95F4\u51FD\u6570</td><td>mktime(datespec)</td><td>\u5C06\u4E00\u4E2A\u6309 YYYY MM DD HH MM SS [DST] \u683C\u5F0F\u6307\u5B9A\u7684\u65E5\u671F\u8F6C\u6362\u6210\u65F6\u95F4\u6233\u503C\u3002</td></tr><tr><td>strftime(format [,timestamp])</td><td>\u5C06\u5F53\u524D\u65F6\u95F4\u7684\u65F6\u95F4\u6233\u6216 timestamp\uFF08\u5982\u679C\u63D0\u4F9B\u4E86\u7684\u8BDD\uFF09\u8F6C\u5316\u683C\u5F0F\u5316\u65E5\u671F\uFF08\u91C7\u7528 shell \u51FD\u6570 date() \u7684\u683C\u5F0F\uFF09\u3002</td></tr><tr><td>systime()</td><td>\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\u7684\u65F6\u95F4\u6233\u3002 </td></tr></table><p>\u65F6\u95F4\u6233\u6307\u7684\u662F\u683C\u6797\u5A01\u6CBB\u65F6\u95F4\uFF0C\u5373\u4ECE 1970\u5E741\u67081\u65E5\u8D77\u5230\u73B0\u5728\u7684\u603B\u79D2\u6570\u3002</p><h4 id="\u81EA\u5B9A\u4E49\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u51FD\u6570" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u51FD\u6570</h4><p>\u9664\u4E86<code>awk</code> \u4E2D\u7684\u5185\u5EFA\u51FD\u6570\uFF0C\u8FD8\u53EF\u4EE5\u5728 <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\u81EA\u5B9A\u4E49\u51FD\u6570\uFF0C\u521B\u5EFA\u81EA\u5B9A\u4E49\u51FD\u6570\u7684\u57FA\u672C\u683C\u5F0F\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">function</span> \u51FD\u6570\u540D<span class="token punctuation">(</span>\u53C2\u65701\uFF0C\u53C2\u65702\uFF0C<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	\u8FD0\u884C\u4EE3\u7801\uFF1B
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u6CE8\u610F\uFF0C\u81EA\u5B9A\u4E49\u51FD\u6570\u7684\u51FD\u6570\u540D\u5FC5\u987B\u80FD\u591F\u552F\u4E00\u6807\u8BC6\u6B64\u51FD\u6570\uFF0C\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5728\u540C\u4E00\u4E2A <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\uFF0C\u591A\u4E2A\u51FD\u6570\u7684\u51FD\u6570\u540D\u4E0D\u80FD\u76F8\u540C\u3002\u540C\u65F6\uFF0C\u51FD\u6570\u7684\u53C2\u6570\u53EF\u4EE5\u6709\u591A\u4E2A\uFF080 \u4E2A\u30011 \u4E2A\u6216\u591A\u4E2A\uFF09\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">printthird</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	print <span class="token variable">$3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u6B64\u51FD\u6570\u4F1A\u6253\u5370\u8BB0\u5F55\u4E2D\u7684\u7B2C\u4E09\u4E2A\u6570\u636E\u5B57\u6BB5\u3002</p><p>\u51FD\u6570\u8FD8\u80FD\u7528 return \u8BED\u53E5\u8FD4\u56DE\u503C\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">function</span> myrand<span class="token punctuation">(</span>limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">return</span> int<span class="token punctuation">(</span>limit * rand<span class="token punctuation">(</span><span class="token punctuation">))</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u5B9A\u4E49\u51FD\u6570\u65F6\uFF0C\u5B83\u5FC5\u987B\u51FA\u73B0\u5728\u6240\u6709\u4EE3\u7801\u5757\u4E4B\u524D\uFF08\u5305\u62EC BEGIN \u548C END\u4EE3\u7801\u5757\uFF09\u3002</p><h4 id="\u521B\u5EFA\u51FD\u6570\u5E93" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u51FD\u6570\u5E93" aria-hidden="true">#</a> \u521B\u5EFA\u51FD\u6570\u5E93</h4><p><code>awk</code> \u63D0\u4F9B\u4E86\u4E00\u79CD\u9014\u5F84\u6765\u5C06\u591A\u4E2A\u51FD\u6570\u653E\u5230\u4E00\u4E2A\u5E93\u6587\u4EF6\u4E2D\uFF0C\u8FD9\u6837\u7528\u6237\u5C31\u80FD\u5728\u6240\u6709\u7684 <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u4E2D\u4F7F\u7528\u4E86\u3002\u4E3A\u4E86\u65B9\u4FBF\u5927\u5BB6\u7406\u89E3\uFF0C\u4E0B\u9762\u7ED9\u5927\u5BB6\u4E3E\u4E2A\u5B9E\u4F8B\u3002</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u5B58\u50A8\u6240\u6709 <code>awk</code> \u51FD\u6570\u7684\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat funclib</span>
<span class="token keyword">function</span> <span class="token function-name function">myprint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token builtin class-name">printf</span> <span class="token string">&quot;%-16s - %s<span class="token entity" title="\\n">\\n</span>&quot;</span>, <span class="token variable">$1</span>, <span class="token variable">$4</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> myrand<span class="token punctuation">(</span>limit<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token builtin class-name">return</span> int<span class="token punctuation">(</span>limit * rand<span class="token punctuation">(</span><span class="token punctuation">))</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function-name function">printthird</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	print <span class="token variable">$3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u8981\u60F3\u8BA9 <code>awk</code> \u6210\u529F\u8BFB\u53D6 funclib \u51FD\u6570\u5E93\u6587\u4EF6\uFF0C\u5C31\u9700\u8981\u4F7F\u7528 -f \u9009\u9879\uFF0C\u4F46\u6B64\u9009\u9879\u65E0\u6CD5\u548C <code>awk</code> \u811A\u672C\u7A0B\u5E8F\u540C\u65F6\u653E\u5230\u547D\u4EE4\u884C\u4E2D\u4E00\u8D77\u4F7F\u7528\u3002\u56E0\u6B64\uFF0C\u8981\u4F7F\u7528\u5E93\u51FD\u6570\u6587\u4EF6\uFF0C\u53EA\u80FD\u518D\u521B\u5EFA\u4E00\u4E2A\u811A\u672C\u7A0B\u5E8F\u6587\u4EF6\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat script4</span>
BEGIN<span class="token punctuation">{</span> <span class="token assign-left variable">FS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token entity" title="\\n">\\n</span>&quot;</span><span class="token punctuation">;</span> <span class="token assign-left variable">RS</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>
	myprint<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># awk -f funclib -f script4 data2</span>
Riley Mullen   - <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams  - <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell   - <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,111);function u(b,d){return p(),t(l,null,[r,c,i],64)}var k=e(o,[["render",u]]);export{k as default};
