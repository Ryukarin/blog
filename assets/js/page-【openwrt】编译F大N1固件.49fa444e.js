(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1088:function(s,a,t){"use strict";t.r(a);var r=t(1),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h2",{attrs:{id:"所需文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#所需文件"}},[s._v("#")]),s._v(" 所需文件")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("Flippy预编译好的 Arm64 内核（3个文件 boot、dtb、modules）")]),s._v(" "),r("p",[s._v("下载地址："),r("a",{attrs:{href:"https://pan.baidu.com/s/19KNVcCQL57mvpiboFc-5rA",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pan.baidu.com/s/19KNVcCQL57mvpiboFc-5rA"),r("OutboundLink")],1),s._v(" 提取码：hk6x")])]),s._v(" "),r("li",[r("p",[s._v("自己编译的 openwrt rootfs tar.gz 包")]),s._v(" "),r("ul",[r("li",[s._v("openwrt-armvirt-64-default-rootfs.tar.gz")])])])]),s._v(" "),r("h2",{attrs:{id:"准备环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#准备环境"}},[s._v("#")]),s._v(" 准备环境")]),s._v(" "),r("ul",[r("li",[r("p",[s._v("linux 环境（这里以 Ubuntu 20.04 为工作环境）")])]),s._v(" "),r("li",[r("p",[s._v("预先安装软件包。")]),s._v(" "),r("p",[s._v("losetup、lsblk(版本>=2.33)、blkid、uuidgen、fdisk、parted、mkfs.vfat、mkfs.ext4、mkfs.btrfs (列表不一定完整，打包过程中若发生错误，请自行检查输出结果并添加缺失的命令）")])])]),s._v(" "),r("h2",{attrs:{id:"openwrt-编译"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#openwrt-编译"}},[s._v("#")]),s._v(" OpenWRT 编译")]),s._v(" "),r("p",[s._v("关于编译，请参考此篇文章："),r("a",{attrs:{href:"https://ryukarin.github.io/blog/operate/openwrt/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://ryukarin.github.io/blog/operate/openwrt/"),r("OutboundLink")],1)]),s._v(" "),r("p",[r("strong",[s._v("编译注意事项：")])]),s._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[s._v("Target System  ->  QEMU ARM Virtual Machine \nSubtarget ->  QEMU ARMv8 Virtual Machine (cortex-a53)\nTarget Profile  ->  Default\nTarget Images  ->   tar.gz\n*** 必选软件包(基础依赖包，仅保证打出的包可以写入EMMC,可以在EMMC上在线升级，不包含具体的应用)： \nLanguages -> Perl               \n             ->  perl-http-date\n             ->  perlbase-getopt\n             ->  perlbase-time\n             ->  perlbase-unicode                              \n             ->  perlbase-utf8        \nUtilities -> Disc -> blkid、fdisk、lsblk、parted            \n          -> Filesystem -> attr、btrfs-progs(Build with zstd support)、chattr、dosfstools、\n                           e2fsprogs、f2fs-tools、f2fsck、lsattr、mkf2fs、xfs-fsck、xfs-mkfs\n          -> Compression -> bsdtar 或 p7zip(非官方源)、pigz\n          -> Shells  ->  bash         \n          -> gawk、getopt、losetup、tar、uuidgen\n\n * (可选)Wifi基础包：\n *     打出的包可支持博通SDIO无线模块,Firmware不用选，\n *     因为打包源码中已经包含了来自Armbian的firmware，\n *     会自动覆盖openwrt rootfs中已有的firmware\n Kernel modules  ->   Wireless Drivers -> kmod-brcmfmac(SDIO) \n                                       -> kmod-brcmutil\n                                       -> kmod-cfg80211\n                                       -> kmod-mac80211\n Network  ->  WirelessAPD -> hostpad-common\n                          -> wpa-cli\n                          -> wpad-basic\n          ->  iw\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br")])]),r("p",[r("strong",[s._v("除上述必选项以外的软件包可以按需自主选择。")])]),s._v(" "),r("ul",[r("li",[r("p",[s._v("编译完成后输出路径："),r("code",[s._v("lede/bin/targets/armvirt/64/")])])]),s._v(" "),r("li",[r("p",[s._v("固件文件名："),r("code",[s._v("openwrt-armvirt-64-default-rootfs.tar.gz")])])])]),s._v(" "),r("h2",{attrs:{id:"编译-phicomm-n1-固件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#编译-phicomm-n1-固件"}},[s._v("#")]),s._v(" 编译 Phicomm_N1 固件")]),s._v(" "),r("ol",[r("li",[r("p",[s._v("新建工作目录")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" openwrt_arm\n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openwrt_arm\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])])]),s._v(" "),r("li",[r("p",[s._v("放置内核文件")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" kernel\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在openwrt_arm下新建kernel目录，并放入Flippy预编译好的Arm64内核（3个相同版本号）")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# boot-5.4.159-flippy-67+o.tar.gz")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dtb-amlogic-5.4.159-flippy-67+o.tar.gz")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# modules-5.4.159-flippy-67+o.tar.gz")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])])]),s._v(" "),r("li",[r("p",[s._v("git clone 项目")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/unifreq/openwrt_packit\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l\n总用量 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\ndrwxrwxr-x  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" karin karin "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":59 kernel\ndrwxrwxr-x "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" karin karin "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":08 lede\ndrwxrwxr-x  "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" karin karin "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("月 "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":54 openwrt_packit\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#把编译好的openwrt-armvirt-64-default-rootfs.tar.gz上传至openwrt_arm/openwrt_packit/目录中")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])])]),s._v(" "),r("li",[r("p",[s._v("修改环境")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openwrt_packit\n$ gedit make.env\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#根据提示，修改WHOAMI，KERNEL_VERSION，KERNEL_PKG_HOME")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# WHOAMI是打包者的名字")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# KERNEL_VERSION是Flippy预编译好的Arm64内核的版本，选择对应的版本，其他注释，没有对应版本则修改")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# KERNEL_PKG_HOME是Flippy预编译好的Arm64内核文件所在目录")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改完成之后保存")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[r("img",{attrs:{src:t(617),alt:"",loading:"lazy"}})])]),s._v(" "),r("li",[r("p",[s._v("执行打包脚本")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./mk_s905d_n1.sh \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./mk_xxx.sh")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xxx指代你想要生成的固件对应的芯片型号或设备型号")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如下信息表示镜像固件已经生成")]),s._v("\n镜像已生成"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" 存放在 /home/karin/openwrt_arm/openwrt_packit/output/ 下面"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" end ./mk_s905d_n1.sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])])])]),s._v(" "),r("p",[s._v("参考：")]),s._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/unifreq/openwrt_packit",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/unifreq/openwrt_packit"),r("OutboundLink")],1)]),s._v(" "),r("p",[s._v("其他盒子固件的编译方法类似（如贝壳云等）")])])}),[],!1,null,null,null);a.default=e.exports},617:function(s,a,t){s.exports=t.p+"assets/img/flippy_openwrt.333750ff.png"}}]);