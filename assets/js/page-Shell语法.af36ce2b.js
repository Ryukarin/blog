(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1157:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("shell 脚本就是将完成一个任务的所有命令按照执行的先后顺序，自上而下写入到一个文本文件中，然后给予执行权限。")]),s._v(" "),a("h2",{attrs:{id:"如何书写一个-shell-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何书写一个-shell-脚本"}},[s._v("#")]),s._v(" 如何书写一个 shell 脚本")]),s._v(" "),a("h3",{attrs:{id:"shell-脚本命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本命名"}},[s._v("#")]),s._v(" shell 脚本命名：")]),s._v(" "),a("p",[s._v("名字要有意义，最好不要用 a、b、c、d、1、2、3、4 这种方式命名；虽然 linux 系统中，文件没有扩展名的概念，依然建议用 .sh 结尾；名字不要太长，最好能在 30 个字节以内解决。例如：check_memory.sh")]),s._v(" "),a("h3",{attrs:{id:"shell脚本格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本格式"}},[s._v("#")]),s._v(" shell脚本格式：")]),s._v(" "),a("p",[s._v("shell 脚本开头必须指定脚本运行环境，以 #! 这个特殊符号组合来组成。例如：#!/bin/bash 来指定该脚本是运行解析由 /bin/bash 来完成的；\nshell 中的注释使用 # 符号")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#shell脚本中，最好加入脚本说明字段")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Author: Admin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Created Time: 2021/02/02 16:23")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Release: 1.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Script Description: first shell study script")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"如何运行一个-shell-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何运行一个-shell-脚本"}},[s._v("#")]),s._v(" 如何运行一个 shell 脚本")]),s._v(" "),a("p",[s._v("脚本运行需要执行权限，当我们给一个文件赋予执行权限后，该脚本就可以运行。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod u+x filename\t\t#赋予执行权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./filename\t\t\t\t#执行脚本333")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如果不希望赋予脚本执行权限，那么可以使用 "),a("code",[s._v("bash")]),s._v(" 命令来运行未给予执行权限的脚本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bash filename\t\t\t#bash执行脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bash -x filename\t\t#-x调试，把每条命令执行情况打印出来")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"shell-中的特殊符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-中的特殊符号"}},[s._v("#")]),s._v(" shell 中的特殊符号")]),s._v(" "),a("p",[s._v("有基础的同学不要和正则表达式中的符号含义搞混淆了。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("符号")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("~")]),s._v(" "),a("td",[s._v("家目录。"),a("code",[s._v("# cd ~")]),s._v("  代表进入用户家目录")])]),s._v(" "),a("tr",[a("td",[s._v("!")]),s._v(" "),a("td",[s._v("执行历史命令。\t"),a("code",[s._v("!!")]),s._v(" 执行上一条命令")])]),s._v(" "),a("tr",[a("td",[s._v("$")]),s._v(" "),a("td",[s._v("变量中取内容符")])]),s._v(" "),a("tr",[a("td",[s._v("+  -  *  /  %")]),s._v(" "),a("td",[s._v("对应数学运算 加 减 乘 除 取余数")])]),s._v(" "),a("tr",[a("td",[s._v("&")]),s._v(" "),a("td",[s._v("后台执行")])]),s._v(" "),a("tr",[a("td",[s._v("*")]),s._v(" "),a("td",[s._v("通配符，匹配所有")])]),s._v(" "),a("tr",[a("td",[s._v("?")]),s._v(" "),a("td",[s._v("通配符，匹配除回车以外的一个字符")])]),s._v(" "),a("tr",[a("td",[s._v(";")]),s._v(" "),a("td",[s._v("分号可以在shell中一行执行多个命令，命令之间用分号分割")])]),s._v(" "),a("tr",[a("td",[s._v("|")]),s._v(" "),a("td",[s._v("管道符，上一个命令的输出作为下一个命令的输入")])]),s._v(" "),a("tr",[a("td",[s._v("``")]),s._v(" "),a("td",[s._v("反引号，命令中优先执行反引号内的命令")])]),s._v(" "),a("tr",[a("td",[s._v("'  '")]),s._v(" "),a("td",[s._v("单引号，脚本中的字符串可以用单引号引起来，单引号不能解释变量")])]),s._v(" "),a("tr",[a("td",[s._v('"  "')]),s._v(" "),a("td",[s._v("双引号，脚本中的字符串可以用双引号引起来，双引号可以解释变量")])])])]),s._v(" "),a("h3",{attrs:{id:"shell-中的管道运用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-中的管道运用"}},[s._v("#")]),s._v(" shell 中的管道运用")]),s._v(" "),a("ul",[a("li",[s._v("管道符 |")])]),s._v(" "),a("p",[s._v("管道符在 shell 中使用是最多的，很多组合命令都需要通过组合命令来完成输出。")]),s._v(" "),a("p",[s._v("管道符其实就是下一个命令对上一个命令的输出作处理。")]),s._v(" "),a("h3",{attrs:{id:"shell-重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-重定向"}},[s._v("#")]),s._v(" shell 重定向")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("重定向符号")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v(">")]),s._v(" "),a("td",[s._v("重定向输入，覆盖原数据。")])]),s._v(" "),a("tr",[a("td",[s._v(">>")]),s._v(" "),a("td",[s._v("重定向追加输入，在原数据的末尾添加。")])]),s._v(" "),a("tr",[a("td",[s._v("<")]),s._v(" "),a("td",[s._v("重定向输出。例如："),a("code",[s._v("wc -l < /etc/passwd")])])]),s._v(" "),a("tr",[a("td",[s._v("<<")]),s._v(" "),a("td",[s._v("重定向追加输出。例如："),a("code",[s._v("fdisk /dev/sdb << EOF...................EOF")])])])])]),s._v(" "),a("h3",{attrs:{id:"shell-数学运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-数学运算"}},[s._v("#")]),s._v(" shell 数学运算")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("expr")]),s._v(" 命令：")])]),s._v(" "),a("p",[s._v("只能做整数运算，格式比较古板，注意命令，数字和运算符之间有空格")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expr 1 + 1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expr 5 - 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expr 3 \\* 7\t\t\t#注意*出现应该转义，否则认为是通配符")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expr 5 / 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expr 10 % 3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("bc")]),s._v(" 命令：")])]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("bc")]),s._v(" 计算器处理浮点运算，scale=2 代表小数点保留两位，quit 退出")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "scale=2;3+100" | bc')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "scale=2;100-3" | bc')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "scale=2;100/3" | bc')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33.33")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#echo "scale=2;100*3" | bc')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("(( ))")]),s._v("运算：")])]),s._v(" "),a("p",[s._v("双小圆括号运算，在 shell 中 "),a("code",[s._v("(( ))")]),s._v(" 也可以用来作数学运算")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((100+3))")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("103")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((100-3))")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((100*3))")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((100/3))")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((100%3))")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $((10**3))\t\t\t\t#开方运算")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"退出脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出脚本"}},[s._v("#")]),s._v(" 退出脚本")]),s._v(" "),a("p",[a("code",[s._v("exit NUM")]),s._v(" 退出脚本，释放系统资源，NUM 代表一个整数，代表返回值。")]),s._v(" "),a("ul",[a("li",[s._v("exit 0：正常运行程序并退出程序；")]),s._v(" "),a("li",[s._v("exit 1：非正常运行导致退出程序；")])]),s._v(" "),a("p",[a("code",[s._v("exit 0")]),s._v(" 可以告知你的程序的使用者，你的程序是正常结束的。\n如果 "),a("code",[s._v("exit 非0值")]),s._v("，那么你的程序的使用者通常会认为你的程序产生了一个错误。")]),s._v(" "),a("p",[s._v("在shell中调用完你的程序之后，用 "),a("code",[s._v("echo $?")]),s._v(" 命令就可以看到你的程序的 exit 值。在 shell 脚本中，通常会根据上一个命令的 $? 值来进行一些流程控制。0 代表程序正确的执行。")])])}),[],!1,null,null,null);t.default=e.exports}}]);